<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>H Troubleshooting</title> 
<meta http-equiv="Content-Type" content="text/html; charset="utf-8""> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next,javascript,charset="utf-8" --> 
<meta name="src" content="main.tex"> 
<link rel="stylesheet" type="text/css" href="main.css"> 
<script type="text/javascript" src="scripts/shCore.js"></script> 
<script type="text/javascript" src="scripts/shBrushCpp.js"></script> 
<script type="text/javascript" src="scripts/shBrushJava.js"></script> 
<script type="text/javascript" src="scripts/shBrushPython.js"></script> 
<script type="text/javascript" src="scripts/shBrushBash.js"></script> 
<script type="text/javascript" src="scripts/shBrushXml.js"></script> 
<link href="styles/shCore.css" rel="stylesheet" type="text/css" /> 
<link href="styles/shThemeDefault.css" rel="stylesheet" type="text/css" /> 
<script type="text/javascript"> 
SyntaxHighlighter.all() 
</script> 
 </head><body 
>
<link rel="icon" type="image/png" href="images/RedHawk_Logo16x.gif"> 
<script> 
function f() {  
document.getElementById('main_content_wrap').focus(); 
} 
if (window.addEventListener) { 
window.addEventListener("load", f, false); 
} else if (window.attachEvent) { 
window.attachEvent("onload", f); 
} 
</script> 
<div class="header"> 
<ul class="navbar"> 
<li><a class="logo-small" href="index.html"><img src="images/RedHawk_Logo_ALT_B_121px.png"/></a></li> <li><a href="index.html">Home</a></li> 
<li><a class="active" href="documentation.html">Documentation</a></li> 
<li><a href="download.html">Download</a></li> 
<li><a href="community.html">Community</a></li> 
</ul> 
<div class="pattern right"></div> 
<a id="forkme_banner" href="https://github.com/redhawksdr">View on GitHub</a> 
<noscript><div class ="NoScript">WARNING: JAVASCRIPT is not enabled. JAVASCRIPT is required for viewing code snippets.</div></noscript> 
</div> 
<!-- Custom MAIN CONTENT --> 
<div id="main_content_wrap" tabindex="0" class="outer"> 
<section id="main_content" class="inner"> 
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainap9.html" >next</a>] [<a 
href="mainap7.html" >prev</a>] [<a 
href="mainap7.html#tailmainap7.html" >prev-tail</a>] [<a 
href="#tailmainap8.html">tail</a>] [<a 
href="main.html#mainap8.html" >up</a>] </p></div>
<h2 class="appendixHead"><span class="titlemark">Appendix&#x00A0;H</span><br /><a 
 id="x28-485000H"></a>Troubleshooting</h2>
<h3 class="sectionHead"><span class="titlemark">H.1   </span> <a 
 id="x28-486000H.1"></a>Introduction</h3>
<!--l. 4--><p class="noindent" >This appendix explains how to troubleshoot and resolve <span 
class="ectt-1200">omniNames/omniEvents </span>failures.
<!--l. 6--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">H.2   </span> <a 
 id="x28-487000H.2"></a>Performing a Hard Reset Using the <span 
class="ectt-1200">cleanomni </span>Script</h3>
<!--l. 9--><p class="noindent" >The <span 
class="ectt-1200">cleanomni </span>script is used to perform a hard reset of <span 
class="ectt-1200">omniNames </span>and <span 
class="ectt-1200">omniEvents </span>and delete
the associated log files. To run this script, enter the following command:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
sudo $OSSIEHOME/bin/cleanomni
]]></script></div>
<!--l. 16--><p class="noindent" >The <span 
class="ectt-1200">cleanomni </span>script performs the following commands:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
sudo /etc/init.d/omniEvents stop
sudo /etc/init.d/omniNames stop
sudo rm -rf /var/log/omniORB/* /var/lib/omniEvents/*
sudo /etc/init.d/omniNames start
sudo /etc/init.d/omniEvents start
]]></script></div>
<!--l. 26--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">H.3   </span> <a 
 id="x28-488000H.3"></a>Diagnosing Problems Using the <span 
class="ectt-1200">rh_net_diag </span>Script</h3>
<!--l. 27--><p class="noindent" >The <span 
class="ectt-1200">rh_net_diag </span>script is a Python script used to diagnose various omniORB-related problems
and to perform other system checks to diagnose potential problems that may impact a REDHAWK
installation. To run this script, enter the following command:
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
rh_net_diag
]]></script></div>
<!--l. 35--><p class="noindent" >By default, the <span 
class="ectt-1200">--ns </span>(<a 
href="mainli2.html#glo:namingservice">Naming Service</a>), <span 
class="ectt-1200">--dom </span>(<a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>), and <span 
class="ectt-1200">--dev </span>(<a 
href="mainli2.html#glo:devicemanager">Device Manager</a>)
options are enabled when the script is executed. These options assume that <span 
class="ectt-1200">omniNames</span>, the
<a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>, and the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> are all running on the host executing the script. For
help with <span 
class="ectt-1200">rh_net_diag</span>, enable the <span 
class="ectt-1200">-h </span>option. For more detailed output, enable the <span 
class="ectt-1200">-v </span>option. The
four test categories include:
      <ul class="itemize1">
      <li class="itemize">Standard tests performed every time <span 
class="ectt-1200">rh_net_diag </span>is executed.
           <ul class="itemize2">
           <li class="itemize">Check if <span 
class="ectt-1200">OSSIEHOME</span>, <span 
class="ectt-1200">SDRROOT</span>, and <span 
class="ectt-1200">/etc/omniORB.cfg </span>are readable.
           </li>
           <li class="itemize">Check that omniORB is installed.
           </li>
           <li class="itemize">If <span 
class="ectt-1200">/etc/omniORB.cfg </span>is not readable or if omniORB is not installed, the script
           terminates.</li></ul>
      </li>
      <li class="itemize">Tests that diagnose potential problems with the <a 
href="mainli2.html#glo:namingservice">Naming Service</a>. They are performed if <span 
class="ectt-1200">--ns</span>
      is enabled.
           <ul class="itemize2">
           <li class="itemize">Check if <span 
class="ectt-1200">omniNames </span>is running.
           </li>
           <li class="itemize">Check if <span 
class="ectt-1200">omniEvents </span>is running and if it is running locally. If it is not running
           at all, refer to <a 
href="#x28-487000H.2">Section H.2</a>. If it is not running locally, assume it is running on
           another host.
           </li>
           <li class="itemize">Retrieve entries currently stored in the <a 
href="mainli2.html#glo:namingservice">Naming Service</a>. Refer to <a 
href="#x28-491000H.6">Section H.6</a> for
           further assistance.
           </li>
           <li class="itemize">Check <span 
class="ectt-1200">/etc/omniORB.cfg </span>to ensure that all defined endPoints are correct.
                                                                                         
                                                                                         
           </li>
           <li class="itemize">If all the above checks pass but the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> still
           cannot communicate with the <a 
href="mainli2.html#glo:namingservice">Naming Service</a>, manually check the firewall settings
           on the host running <span 
class="ectt-1200">omniNames</span>.</li></ul>
      </li>
      <li class="itemize">Tests that diagnose potential problems with the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>. They are performed if
      <span 
class="ectt-1200">--dom </span>is enabled.
           <ul class="itemize2">
           <li class="itemize">Attempt to retrieve entries currently stored in the <a 
href="mainli2.html#glo:namingservice">Naming Service</a>.
           </li>
           <li class="itemize">Check if <span 
class="ectt-1200">omniEvents </span>is running and if it is running locally. If it is not running
           at all, refer to <a 
href="#x28-487000H.2">Section H.2</a>. If it is not running locally, assume it is running on
           another host.
           </li>
           <li class="itemize">Check <span 
class="ectt-1200">/etc/omniORB.cfg </span>to ensure all defined endPoints are correct.</li></ul>
      </li>
      <li class="itemize">Tests that diagnose potential problems with the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>. They are performed if
      <span 
class="ectt-1200">--dev </span>is enabled.
           <ul class="itemize2">
           <li class="itemize">Check if <span 
class="ectt-1200">InitRef </span>was overwritten with the <span 
class="ectt-1200">rh_net_diag </span>script <span 
class="ectt-1200">--ORBInitRef</span>
           option or if we are using the <span 
class="ectt-1200">InitRef </span>specified in <span 
class="ectt-1200">/etc/omniORB.cfg</span>.
           </li>
           <li class="itemize">If <span 
class="ectt-1200">InitRef </span>is valid, attempt to retrieve entries currently stored in the <a 
href="mainli2.html#glo:namingservice">Naming
           Service</a>. Refer to <a 
href="#x28-491000H.6">Section H.6</a> for further assistance.
           </li>
           <li class="itemize">Check if <span 
class="ectt-1200">omniEvents </span>is running and if it is running locally. If it is not running
           at all, refer to <a 
href="#x28-487000H.2">Section H.2</a>. If it is not running locally, assume it is running on
           another host.
           </li>
           <li class="itemize">Try to connect to the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> if one exists in the <a 
href="mainli2.html#glo:namingservice">Naming Service</a>.
           </li>
           <li class="itemize">Check that the IP address for the host running this script is listed in <span 
class="ectt-1200">ifconfig</span>. If
           there is no matching entry with the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>, then the Java components
           fail on initialization.</li></ul>
      </li></ul>
                                                                                         
                                                                                         
<!--l. 78--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">H.4   </span> <a 
 id="x28-489000H.4"></a>Performing a Soft Reset of omniNames and omniEvents</h3>
<!--l. 80--><p class="noindent" >If the runtime-error indicates a <a 
href="mainli2.html#glo:namingservice">Naming Service</a> failure, enter the following command to attempt a
soft reset on <span 
class="ectt-1200">omniNames</span>:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
sudo /sbin/service omniNames restart
]]></script></div>
<!--l. 86--><p class="noindent" >This process first performs a stop and then performs a start. If the stop process fails, <span 
class="ectt-1200">omniNames</span>
was never started, stopped due to an error condition, or is in a non-recoverable state. If the start
process fails, <span 
class="ectt-1200">omniNames </span>is either misconfigured or already running (i.e., <span 
class="ectt-1200">omniNames </span>was not
stopped).
<!--l. 90--><p class="noindent" ><div class="admonition block note block-indent"><div class="note-inner"><p class="para block block-first"> <span 
class="ectt-1200">omniNames </span>can potentially report a successful start and then fail soon after. If the <span 
class="ectt-1200">omniNames</span>
service appears to fail after reporting a successful start, a reconfiguration and hard reset of
<span 
class="ectt-1200">omniNames </span>may be necessary. For more information, refer to <a 
href="#x28-491000H.6">Section H.6</a> and <a 
href="#x28-487000H.2">Section H.2</a>. </p></div></div>
<!--l. 95--><p class="noindent" >A restart of <span 
class="ectt-1200">omniEvents </span>may be necessary when restarting <span 
class="ectt-1200">omniNames</span>. To perform a soft reset of
<span 
class="ectt-1200">omniEvents</span>, enter the following command:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
sudo /sbin/service omniEvents restart
]]></script></div>
<!--l. 101--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">H.5   </span> <a 
 id="x28-490000H.5"></a>Setting Omni Log Levels</h3>
<!--l. 103--><p class="noindent" >When diagnosing <span 
class="ectt-1200">omniNames/omniEvents </span>problems, it is often useful to set the omni
logging levels. Use the following procedure to set the omni logging levels (requires root
permissions):
<!--l. 105--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x28-490002x1">Open the <span 
class="ectt-1200">/etc/omniORB.cfg </span>file.
                                                                                         
                                                                                         
      </li>
      <li 
  class="enumerate" id="x28-490004x2">Set a traceLevel value. For example: <div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
traceLevel = 10
]]></script></div>
      </li></ol>
<!--l. 113--><p class="noindent" >Details on the available trace levels can be found in Chapter 4 of the omniORB User&#8217;s Guide
(<a 
href="http://omniorb.sourceforge.net/omni41/omniORB/omniORB004.html" class="url" ><span 
class="ectt-1200">http://omniorb.sourceforge.net/omni41/omniORB/omniORB004.html</span></a> or on your local system
at <a 
href="file:///usr/share/doc/omniORB-devel-4.1.6/doc/omniORB/omniORB004.html" class="url" ><span 
class="ectt-1200">file:///usr/share/doc/omniORB-devel-4.1.6/doc/omniORB/omniORB004.html</span></a>).
<!--l. 115--><p class="noindent" >For the changes to take effect, restart <span 
class="ectt-1200">omniNames/omniEvents</span>.
<!--l. 117--><p class="noindent" >Log messages are displayed in the terminal and in the files contained in <span 
class="ectt-1200">/var/log/omniORB </span>and
<span 
class="ectt-1200">/var/lib/omniEvents</span>.
<!--l. 119--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">H.6   </span> <a 
 id="x28-491000H.6"></a>Common Causes for omniNames Failure</h3>
<!--l. 121--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">H.6.1   </span> <a 
 id="x28-492000H.6.1"></a>IP Version 6 Conflicts</h4>
<!--l. 123--><p class="noindent" >Certain combinations of IP Version 6 (IPv6) configurations and <span 
class="ectt-1200">/etc/omniORB.cfg </span>configurations
can cause <span 
class="ectt-1200">omniNames </span>failures.
<!--l. 125--><p class="noindent" >Specifically, if the <span 
class="ectt-1200">InitRef </span>section of <span 
class="ectt-1200">/etc/omniORB.cfg </span>is set to point to <span 
class="ectt-1200">localhost </span>rather than
pointing explicitly to <span 
class="ectt-1200">127.0.0.1</span>, the operating system may resolve <span 
class="ectt-1200">localhost </span>to <span 
class="ectt-1200">::1 </span>(the IPv6
localhost) and not to <span 
class="ectt-1200">127.0.0.1 </span>(the IPv4 localhost). If this occurs, <span 
class="ectt-1200">omniNames </span>fails. There are
three options for preventing this failure condition:
      <ul class="itemize1">
      <li class="itemize">Explicitly set <span 
class="ectt-1200">127.0.0.1 </span>in the <span 
class="ectt-1200">InitRef </span>section instead of using <span 
class="ectt-1200">localhost</span>.
      </li>
      <li class="itemize">Disable IPv6 in the operating system (refer to operating system documentation).
      </li>
      <li class="itemize">Modify the <span 
class="ectt-1200">/etc/hosts </span>file to prevent <span 
class="ectt-1200">localhost </span>from being resolved as <span 
class="ectt-1200">::1</span>.</li></ul>
                                                                                         
                                                                                         
<!--l. 135--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">H.6.1.1   </span> <a 
 id="x28-493000H.6.1.1"></a>Preventing IPv6 <span 
class="ectt-1200">localhost </span>Resolution</h5>
<!--l. 137--><p class="noindent" >Below is an example <span 
class="ectt-1200">/etc/hosts </span>file from an older <a 
href="mainap9.html#centos">CentOS</a> distribution:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
127.0.0.1   localhost.localdomain     localhost
::1         localhost6.localdomain6   localhost6
]]></script></div>
<!--l. 144--><p class="noindent" >Below is an example <span 
class="ectt-1200">/etc/hosts </span>file from a newer <a 
href="mainap9.html#centos">CentOS</a> distribution:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4
::1       localhost localhost.localdomain localhost6 localhost6.localdomain6
]]></script></div>
<!--l. 151--><p class="noindent" >In the older <span 
class="ectt-1200">/etc/hosts file</span>, <span 
class="ectt-1200">localhost </span>resolves unambiguously to <span 
class="ectt-1200">127.0.0.1</span>. In the newer
<span 
class="ectt-1200">/etc/hosts </span>file, <span 
class="ectt-1200">localhost </span>can resolve to either <span 
class="ectt-1200">127.0.0.1 </span>or <span 
class="ectt-1200">::1 </span>(where resolving to <span 
class="ectt-1200">::1 </span>causes
an <span 
class="ectt-1200">omniNames </span>failure).
<!--l. 154--><p class="noindent" >The newer <span 
class="ectt-1200">/etc/hosts </span>file can be modified to read:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4
::1       localhost6 localhost6.localdomain6
]]></script></div>
<!--l. 161--><p class="noindent" >Alternatively, <span 
class="ectt-1200">localhost4 </span>can be used in the <span 
class="ectt-1200">InitRef </span>section of <span 
class="ectt-1200">/etc/omniORB.cfg</span>.
<!--l. 163--><p class="noindent" >The line pertaining to IPv6 can also be completely removed from the file; however, some operating
systems, depending on IPv6 configurations, may automatically repopulate IPv6 localhost settings
on reboot.
<!--l. 165--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">H.6.2   </span> <a 
 id="x28-494000H.6.2"></a>Invalid IP Addresses in <span 
class="ectt-1200">/etc/hosts</span></h4>
<!--l. 167--><p class="noindent" >Invalid entries in the <span 
class="ectt-1200">/etc/hosts </span>file may induce an <span 
class="ectt-1200">omniNames </span>failure. Invalid entries may be in
the form of an IP address that cannot be reached or in the form of an entry that is not
valid according to the <span 
class="ectt-1200">/etc/hosts </span>grammar. <div class="admonition block note block-indent"><div class="note-inner"><p class="para block block-first">  Firewall IP and <a 
href="mainli2.html#glo:port">Port</a> settings on both
the server and client side may cause the target <span 
class="ectt-1200">omniNames </span>service to be unreachable. </p></div></div>
                                                                                         
                                                                                         
                                                                                         
                                                                                         
<!--l. 2--><div class="crosslinks"><p class="noindent">[<a 
href="mainap9.html" >next</a>] [<a 
href="mainap7.html" >prev</a>] [<a 
href="mainap7.html#tailmainap7.html" >prev-tail</a>] [<a 
href="mainap8.html" >front</a>] [<a 
href="main.html#mainap8.html" >up</a>] </p></div>
<!--l. 2--><p class="noindent" ><a 
 id="tailmainap8.html"></a>   
 
<div class=license>  
<hr> 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br /><span xmlns:dct="http:// purl.org/dc/terms/" property="dct:title">REDHAWK Documentation</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. 
 
</div></section></div> 
</body></html> 
