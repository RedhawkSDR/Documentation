<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>11 The Runtime Environment</title> 
<meta http-equiv="Content-Type" content="text/html; charset="utf-8""> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,next,javascript,charset="utf-8" --> 
<meta name="src" content="main.tex"> 
<link rel="stylesheet" type="text/css" href="main.css"> 
<script type="text/javascript" src="scripts/shCore.js"></script> 
<script type="text/javascript" src="scripts/shBrushCpp.js"></script> 
<script type="text/javascript" src="scripts/shBrushJava.js"></script> 
<script type="text/javascript" src="scripts/shBrushPython.js"></script> 
<script type="text/javascript" src="scripts/shBrushBash.js"></script> 
<script type="text/javascript" src="scripts/shBrushXml.js"></script> 
<link href="styles/shCore.css" rel="stylesheet" type="text/css" /> 
<link href="styles/shThemeDefault.css" rel="stylesheet" type="text/css" /> 
<script type="text/javascript"> 
SyntaxHighlighter.all() 
</script> 
 </head><body 
>
<link rel="icon" type="image/png" href="images/RedHawk_Logo16x.gif"> 
<script> 
function f() {  
document.getElementById('main_content_wrap').focus(); 
} 
if (window.addEventListener) { 
window.addEventListener("load", f, false); 
} else if (window.attachEvent) { 
window.attachEvent("onload", f); 
} 
</script> 
<div class="header"> 
<ul class="navbar"> 
<li><a class="logo-small" href="index.html"><img src="images/RedHawk_Logo_ALT_B_121px.png"/></a></li> <li><a href="index.html">Home</a></li> 
<li><a class="active" href="documentation.html">Documentation</a></li> 
<li><a href="download.html">Download</a></li> 
<li><a href="community.html">Community</a></li> 
</ul> 
<div class="pattern right"></div> 
<a id="forkme_banner" href="https://github.com/redhawksdr">View on GitHub</a> 
<noscript><div class ="NoScript">WARNING: JAVASCRIPT is not enabled. JAVASCRIPT is required for viewing code snippets.</div></noscript> 
</div> 
<!-- Custom MAIN CONTENT --> 
<div id="main_content_wrap" tabindex="0" class="outer"> 
<section id="main_content" class="inner"> 
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainch12.html" >next</a>] [<a 
href="mainch10.html" >prev</a>] [<a 
href="mainch10.html#tailmainch10.html" >prev-tail</a>] [<a 
href="#tailmainch11.html">tail</a>] [<a 
href="main.html#mainch11.html" >up</a>] </p></div>
<h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;11</span><br /><a 
 id="x13-25600011"></a>The Runtime Environment</h2>
<h3 class="sectionHead"><span class="titlemark">11.1   </span> <a 
 id="x13-25700011.1"></a>Overview</h3>
<!--l. 5--><p class="noindent" >The REDHAWK runtime environment provides a mechanism for managing the life cycle
(creation/teardown/initialization) of <a 
href="mainli2.html#glo:component">Components</a> as well as the interconnection of deployed
<a 
href="mainli2.html#glo:component">Components</a>.
<!--l. 9--><p class="noindent" >The primary goal of the runtime environment is to support the necessary infrastructure to deploy
and manage interconnected <a 
href="mainli2.html#glo:component">Components</a> as a running <a 
href="mainli2.html#glo:application">Application</a>.
<!--l. 11--><p class="noindent" >The runtime environment is personified by two binaries, a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> program and a <a 
href="mainli2.html#glo:devicemanager">Device
Manager</a> program. The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> program hosts an instance of a <span 
class="ectt-1200">DomainManager </span>class as
well as supporting objects (<a 
href="mainli2.html#glo:applicationfactory">Application Factory</a>, <a 
href="mainli2.html#glo:application">Application</a>, <a 
href="mainli2.html#glo:filemanager">File Manager</a>). The <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>
program hosts an instance of a <span 
class="ectt-1200">DeviceManager </span>object and an instance of a File System. The only
reason why the major classes making up these programs are imported is because their <a 
href="mainap9.html#api">API</a> is
remotely available, so a user can arbitrarily interact with these objects. Irrespective of their
<a 
href="mainap9.html#api">API</a>, these objects exclusively reside in either the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> or <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>
programs.
<!--l. 17--><p class="noindent" >A single REDHAWK system instance has one <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and an arbitrary number of <a 
href="mainli2.html#glo:devicemanager">Device
Managers</a>. The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>&#8217;s role is as a central bookkeeper as well as a single point
where <a 
href="mainli2.html#glo:application">Applications</a> can be deployed or torn down. A <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> is present in each
host in the REDHAWK network area; in a purely processing context, there would be a
single <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> in each computer that is intended to host running <a 
href="mainli2.html#glo:component">Components</a>.
Each <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> has associated with it a set of <a 
href="mainli2.html#glo:device">Devices</a> that act as proxies for
whatever hardware is running on the computer; in a purely processing context, there is a
single <a 
href="mainli2.html#glo:device">Device</a> proxy describing the microprocessor for each hardware platform <a 
href="mainli2.html#glo:devicemanager">Device
Manager</a>.
<!--l. 22--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> program:
      <ul class="itemize1">
      <li class="itemize">receives an <a 
href="mainap9.html#xml">XML</a> file describing a <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> that is to be deployed.
      </li>
      <li class="itemize">scans all running <a 
href="mainli2.html#glo:device">Devices</a> on all <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> for a suitable place to deploy the
      <a 
href="mainli2.html#glo:component">Components</a> making up the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>.
      </li>
      <li class="itemize">uses the <a 
href="mainli2.html#glo:filemanager">File Manager</a> / File System to copy whatever files are necessary to run the
                                                                                         
                                                                                         
      <a 
href="mainli2.html#glo:component">Components</a> to the target <a 
href="mainli2.html#glo:devicemanager">Device Managers</a>.
      </li>
      <li class="itemize">remotely invokes the <a 
href="mainli2.html#glo:component">Component</a> processes.
      </li>
      <li class="itemize">interconnects <a 
href="mainli2.html#glo:component">Components</a> over the network.
      </li>
      <li class="itemize">tears down <a 
href="mainli2.html#glo:application">Applications</a> appropriately.</li></ul>
<!--l. 34--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.1.1   </span> <a 
 id="x13-25800011.1.1"></a>Launching a Domain</h4>
<!--l. 37--><p class="noindent" >If REDHAWK was installed from <a 
href="mainap9.html#rpm">RPM</a>s, a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> are ready for
immediate use on the <span 
class="ectt-1200">localhost</span>. To launch a default <a 
href="mainli2.html#glo:domain">Domain</a> in the <a 
href="mainap9.html#ide">IDE</a>, follow these
steps:
<!--l. 39--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-258002x1">In the <a 
href="mainli2.html#glo:REDHAWK Explorer View"><span 
class="ecbx-1200">REDHAWK Explorer View</span></a> (by default, on the right-side of the window)
      right-click the <a 
href="mainli2.html#glo:targetSDR"><span 
class="ecbx-1200">Target SDR</span></a> element and select <span 
class="ecbx-1200">Launch Domain</span><span 
class="ecbx-1200">&#x2026; </span>(<a 
href="#x13-258003r1">Figure 11.1</a>).
      <!--l. 42--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-258003r1"></a> <img 
src="images/REDHAWK_Launch_domain.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.1: </td><td  
class="content">Launching a Domain</td></tr></table><!--tex4ht:label?: x13-258003r1 -->
      <!--l. 47--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-258005x2">In the <a 
href="mainli2.html#glo:devicemanager"><span 
class="ecbx-1200">Device Manager</span></a> section of the <span 
class="ecbx-1200">Launch Domain Manager </span>window, select
      <span 
class="ecbx-1200">DevMgr_</span><span 
class="ecbi-1200">hostname </span>(<a 
href="#x13-258006r2">Figure 11.2</a>).
      <!--l. 51--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-258006r2"></a> <img 
src="images/NodesAndDevices/SelectDevMgr.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.2: </td><td  
class="content">Device Manager Selection</td></tr></table><!--tex4ht:label?: x13-258006r2 -->
      <!--l. 56--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-258008x3">Click <span 
class="ecbx-1200">OK</span>.</li></ol>
<!--l. 63--><p class="noindent" >This launches both a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and a <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> that manages a single <a 
href="mainap9.html#gpp">GPP</a> <a 
href="mainli2.html#glo:device">Device</a>.
The output from both the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> is displayed in the
<span 
class="ecbx-1200">Console </span>view. If this view is not visible, select <span 
class="ecbx-1200">Window </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Show View </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Console</span>. To
stop these processes, click the <span 
class="ecbx-1200">Terminate </span>icon (red square) (<a 
href="#x13-258009r3">Figure 11.3</a>). To toggle
                                                                                         
                                                                                         
between consoles, click the <span 
class="ecbx-1200">Display Selected Console </span>icon (computer monitor) (<a 
href="#x13-258010r4">Figure
11.4</a>).
<!--l. 69--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x13-258009r3"></a>
                                                                                         
                                                                                         
<!--l. 71--><p class="noindent" ><img 
src="images/RuntimeEnvironmentInDepth/stop_doms.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.3: </td><td  
class="content">Terminate Icon</td></tr></table><!--tex4ht:label?: x13-258009r3 -->
                                                                                         
                                                                                         
<!--l. 74--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
<!--l. 76--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x13-258010r4"></a>
                                                                                         
                                                                                         
<!--l. 78--><p class="noindent" ><img 
src="images/switch_console.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.4: </td><td  
class="content">Display Selected Console Icon</td></tr></table><!--tex4ht:label?: x13-258010r4 -->
                                                                                         
                                                                                         
<!--l. 81--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
<!--l. 83--><p class="noindent" >The <span 
class="ecbx-1200">REDHAWK_DEV </span><a 
href="mainli2.html#glo:domain">Domain</a> connection is displayed in the <a 
href="mainli2.html#glo:REDHAWK Explorer View"><span 
class="ecbx-1200">REDHAWK Explorer View</span></a>
(<a 
href="#x13-258011r5">Figure 11.5</a>). Its state is <span 
class="ecbx-1200">CONNECTED </span>and there are no errors. A <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> process
and a <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> process now exist on the host.
<!--l. 87--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x13-258011r5"></a>
                                                                                         
                                                                                         
<!--l. 89--><p class="noindent" ><img 
src="images/running_domain.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.5: </td><td  
class="content">Domain connections shown in IDE</td></tr></table><!--tex4ht:label?: x13-258011r5 -->
                                                                                         
                                                                                         
<!--l. 92--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
<h4 class="subsectionHead"><span class="titlemark">11.1.2   </span> <a 
 id="x13-25900011.1.2"></a>Shutting Down the Domain</h4>
<!--l. 98--><p class="noindent" >Normally, the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> remain running indefinitely; these programs
are designed to remain running for extended periods of time as different parts of the overall
<a 
href="mainli2.html#glo:domain">Domain</a> (e.g., <a 
href="mainli2.html#glo:devicemanager">Device Managers</a>, <a 
href="mainli2.html#glo:application">Applications</a>, and files on <span 
class="ectt-1200">$SDRROOT</span>) come and go. However, for
the purpose of the following procedure, the process for shutting down a running <a 
href="mainli2.html#glo:domain">Domain</a> is
explained. To cleanly shutdown, it is best to disconnect the <a 
href="mainli2.html#glo:domain">Domain</a> and stop the processes that
have been started.
<!--l. 102--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-259002x1">In the <a 
href="mainli2.html#glo:REDHAWK Explorer View"><span 
class="ecbx-1200">REDHAWK Explorer View</span></a>, right-click the <span 
class="ecbx-1200">REDHAWK_DEV </span><a 
href="mainli2.html#glo:domain">Domain</a>
      and select <span 
class="ecbx-1200">Disconnect </span>(<a 
href="#x13-259013r6">Figure 11.6</a>).
      </li>
      <li 
  class="enumerate" id="x13-259004x2">In the <span 
class="ecbx-1200">Console </span>view, select the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> Console from the <span 
class="ecbx-1200">Display Selected</span>
      <span 
class="ecbx-1200">Console </span>icon (<a 
href="#x13-258010r4">Figure 11.4</a>).
      </li>
      <li 
  class="enumerate" id="x13-259006x3">To stop the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>, click the <span 
class="ecbx-1200">Terminate </span>icon (<a 
href="#x13-258009r3">Figure 11.3</a>).
      </li>
      <li 
  class="enumerate" id="x13-259008x4">In the <span 
class="ecbx-1200">Console </span>view, select the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> Console from the <span 
class="ecbx-1200">Display Selected</span>
      <span 
class="ecbx-1200">Console </span>icon (<a 
href="#x13-258010r4">Figure 11.4</a>).
      </li>
      <li 
  class="enumerate" id="x13-259010x5">To stop the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>, click the <span 
class="ecbx-1200">Terminate </span>icon (<a 
href="#x13-258009r3">Figure 11.3</a>).
      </li>
      <li 
  class="enumerate" id="x13-259012x6">Select <span 
class="ecbx-1200">File </span><span 
class="cmmi-12">&#x003E; </span><span 
class="ecbx-1200">Exit</span>.</li></ol>
<!--l. 111--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x13-259013r6"></a>
                                                                                         
                                                                                         
<!--l. 113--><p class="noindent" ><img 
src="images/RuntimeEnvironmentInDepth/domain_disconnect.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.6: </td><td  
class="content">Disconnect From Domain</td></tr></table><!--tex4ht:label?: x13-259013r6 -->
                                                                                         
                                                                                         
<!--l. 116--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
<!--l. 119--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> and <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> processes no longer exist on the host. The <a 
href="mainli2.html#glo:domain">Domain</a>
entry remains in the <a 
href="mainli2.html#glo:REDHAWK Explorer View"><span 
class="ecbx-1200">REDHAWK Explorer View</span></a> with a <span 
class="ecbx-1200">DISCONNECTED </span>state indicating
that the <a 
href="mainli2.html#glo:domain">Domain</a> is no longer visible. This decoupling of the running <a 
href="mainli2.html#glo:domain">Domain</a> from the
environment enables the <a 
href="mainli2.html#glo:REDHAWK Explorer"><span 
class="ecbx-1200">REDHAWK Explorer</span></a> to interact with an arbitrary number
of <a 
href="mainli2.html#glo:domain">Domains</a> on a network where each <a 
href="mainli2.html#glo:domain">Domain</a>&#8217;s life cycle is outside the control of the
<a 
href="mainap9.html#ide">IDE</a>.
<h3 class="sectionHead"><span class="titlemark">11.2   </span> <a 
 id="x13-26000011.2"></a>The Domain Manager</h3>
<!--l. 4--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> interface is in charge of the control and configuration of the entire systems
<a 
href="mainli2.html#glo:domain">Domain</a>.
<!--l. 6--><p class="noindent" >Its primary responsibilities can be grouped into three main categories:
      <ul class="itemize1">
      <li class="itemize">Registration
      </li>
      <li class="itemize">Core Framework administration
      </li>
      <li class="itemize">Human Computer Interfacing</li></ul>
<!--l. 13--><p class="noindent" >Each <a 
href="mainli2.html#glo:domain">Domain</a> has a single <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> that keeps track of a <a 
href="mainli2.html#glo:filemanager">File Manager</a>, a set of <a 
href="mainli2.html#glo:devicemanager">Device
Managers</a>, and a set of <a 
href="mainli2.html#glo:applicationfactory">Application Factories</a>. The <a 
href="mainli2.html#glo:domain">Domain</a> Manger maintains information on all
aspects of the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>&#8217;s implementations contained within its system.
<!--l. 16--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is configured from the <a 
href="mainap9.html#dmd">DMD</a> <a 
href="mainap9.html#xml">XML</a> file that is located at <span 
class="ectt-1200">$SDRROOT/dom/Domain</span>.
This file contains the <a 
href="mainli2.html#glo:domain">Domain</a>&#8217;s name, an <a 
href="mainap9.html#id">ID</a> and a description of the <a 
href="mainli2.html#glo:domain">Domain</a>.
<!--l. 19--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.2.1   </span> <a 
 id="x13-26100011.2.1"></a>Launching a Domain Manager from the command line</h4>
<!--l. 22--><p class="noindent" >Enter the following commands to launch a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> from the command line:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
nodeBooter -D
INFO:DomainManager - Starting Domain Manager
INFO:DomainManager - Starting ORB!
]]></script></div>
                                                                                         
                                                                                         
<!--l. 30--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.2.2   </span> <a 
 id="x13-26200011.2.2"></a>Registration</h4>
<!--l. 32--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is able to maintain information about all working parts and interactions in
the environment through registration. It can be thought of as the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>&#8217;s responsibility
of bookkeeping for the system.
<!--l. 35--><p class="noindent" >Any time a <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>, <a 
href="mainli2.html#glo:device">Device</a>, <a 
href="mainli2.html#glo:service">Service</a> or <a 
href="mainli2.html#glo:application">Application</a> is created within the system, it is
registered through the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>. Likewise, when they are destroyed, they are unregistered
from the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>. These tasks are handled through a serious of <span 
class="ectt-1200">register() </span>and
<span 
class="ectt-1200">unregister() </span>functions for each of the different modules that the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is responsible
for supporting.
<!--l. 41--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.2.3   </span> <a 
 id="x13-26300011.2.3"></a>Core Framework Administration</h4>
<!--l. 43--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> has Core Framework administrative duties that are required to provide
interface access to its registered items. The <a 
href="mainap9.html#api">API</a> of the <a 
href="mainli2.html#glo:devicemanager">Device Managers</a>, <a 
href="mainli2.html#glo:applicationfactory">Application Factories</a>,
<a 
href="mainli2.html#glo:application">Applications</a>, and the <a 
href="mainli2.html#glo:filemanager">File Manager</a> that are registered in the <a 
href="mainli2.html#glo:domain">Domain</a> are made available to be
accessed from an external piece of software.
<!--l. 46--><p class="noindent" >This is made available so that changes can be made from outside of the running <a 
href="mainli2.html#glo:domain">Domain</a>. A
Python module is distributed with REDHAWK that allows for simple interfacing with a running
<a 
href="mainli2.html#glo:domain">Domain</a>. This allows for runtime inspection and tweaking of the environment. For more on this,
refer to <a 
href="mainch12.html#x14-29900012">Chapter 12</a>.
<!--l. 51--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.2.4   </span> <a 
 id="x13-26400011.2.4"></a>Human Computer Interfacing</h4>
<!--l. 53--><p class="noindent" >The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is also responsible for providing functionality that allows for
simple interaction between the user and the system, granting the user control over the
running <a 
href="mainli2.html#glo:domain">Domain</a>. Functionality exists that provide the ability to configure the <a 
href="mainli2.html#glo:domain">Domain</a>,
get its current <a 
href="mainli2.html#glo:device">Device</a>, <a 
href="mainli2.html#glo:service">Service</a> and <a 
href="mainli2.html#glo:application">Application</a> capabilities and launch maintenance
functions.
<!--l. 56--><p class="noindent" >Capabilities are managed through a series of data structure sequences. Lists are maintained for all
                                                                                         
                                                                                         
<a 
href="mainli2.html#glo:service">Services</a>, <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> and <a 
href="mainli2.html#glo:device">Devices</a> that have been registered with the <a 
href="mainli2.html#glo:domain">Domain</a>. Each entry in
the list contains name and identification information as well as a reference to the object that has
been registered. For any <a 
href="mainli2.html#glo:application">Application</a> that has been installed, a reference to its <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a>
is stored in a list along with its name and identification information. Once the <a 
href="mainli2.html#glo:application">Application</a> has
started, its reference, along with all relevant identification, <a 
href="mainli2.html#glo:component">Component</a>, connection and ordering
information is stored for later retrieval.
<!--l. 62--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.2.5   </span> <a 
 id="x13-26500011.2.5"></a>Persistence Store</h4>
<!--l. 64--><p class="noindent" >A unique feature of the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is the ability to recover from catastrophic failures
through <a 
href="mainli2.html#glo:domain">Domain</a> Persistence. In order to make use of Persistence, a compile-time option
must be specified. Ensure that the Core Framework has been compiled from source
and that <span 
class="ectt-1200">./configure </span>was ran with <span 
class="ectt-1200">--enable-persistence=persist_type </span>(<a 
href="mainap2.html#x21-424000B.1.2">Section
B.1.2</a>).
<!--l. 68--><p class="noindent" >With this feature enabled, all bookkeeping data structures that are used to maintain information
about <a 
href="mainli2.html#glo:service">Services</a>, <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:devicemanager">Device Managers</a>, <a 
href="mainli2.html#glo:application">Applications</a> and <a 
href="mainli2.html#glo:applicationfactory">Application Factories</a> are
written to a database whenever any change is made to them. This database file needs
to be specified upon launch of the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> with the <span 
class="ectt-1200">--dburl &#x003C;file path&#x003E;</span>
argument:
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
nodeBooter -D --dburl $SDRROOT/dom/persistence.sqlite
]]></script></div>
<!--l. 75--><p class="noindent" >Then, upon failure of the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>, all <a 
href="mainap9.html#id">ID</a>s and references to objects within it
<a 
href="mainli2.html#glo:domain">Domain</a> are stored. Since these objects themselves are actually separate processes, the
<a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> can be relaunched with the same arguments, and it is restored to the
previous state. When the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> gets launched, it calls the <span 
class="ectt-1200">restoreState()</span>
function with a file path string as an argument. It then opens the given database file and
attempts to parse out any stored information in order to reconnect those processes with the
<a 
href="mainli2.html#glo:domain">Domain</a>. Once this is finished, the <a 
href="mainli2.html#glo:domain">Domain</a> is rebuilt to the state it was in before it
died.
<h3 class="sectionHead"><span class="titlemark">11.3   </span> <a 
 id="x13-26600011.3"></a>File System</h3>
<!--l. 3--><p class="noindent" >The File System interface defines <a 
href="mainap9.html#corba">CORBA</a> operations that exists to provide a runtime abstraction
of an <a 
href="mainap9.html#os">OS</a>s real file system. It gives REDHAWK the ability to have a single interface for reading and
                                                                                         
                                                                                         
writing individual files within a file system regardless of the underlying implementation in the
<a 
href="mainap9.html#os">OS</a>.
<!--l. 6--><p class="noindent" >Files that are stored on the File System may be either plain files or directories.
<!--l. 8--><p class="noindent" >Characters and symbols that are valid in directories and file names consist of:
      <ul class="itemize1">
      <li class="itemize">Upper and lowercase letters
      </li>
      <li class="itemize">Numbers
      </li>
      <li class="itemize">&#8220;_&#8221; (underscore)
      </li>
      <li class="itemize">&#8220;-&#8221; (hyphen)
      </li>
      <li class="itemize">&#8220;.&#8221; (period)
           <ul class="itemize2">
           <li class="itemize">The file names &#8220;.&#8221; and &#8220;..&#8221; are invalid in the context of a File System.</li></ul>
      </li></ul>
<!--l. 21--><p class="noindent" >Path names are structured according to the Portable Operating System Interface (<a 
href="mainap9.html#posix">POSIX</a>)
specification where the &#8220;/&#8221; (forward slash) is a valid character that acts as the separator between
directories.
<!--l. 23--><p class="noindent" >Additionally, the File System interface provides implementation of many standard functions such
as:
      <ul class="itemize1">
      <li class="itemize">remove()
      </li>
      <li class="itemize">copy()
      </li>
      <li class="itemize">exists()
      </li>
      <li class="itemize">list()
                                                                                         
                                                                                         
      </li>
      <li class="itemize">create()
      </li>
      <li class="itemize">open()
      </li>
      <li class="itemize">mkdir()
      </li>
      <li class="itemize">rmdir()
      </li>
      <li class="itemize">query()</li></ul>
<!--l. 36--><p class="noindent" >File System attached to the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> mounts with <span 
class="ectt-1200">$SDRROOT/dom </span>as the root. Each <a 
href="mainli2.html#glo:devicemanager">Device
Manager</a> mounts a File System with <span 
class="ectt-1200">$SDRROOT/dev </span>as the root.
<!--l. 39--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.3.1   </span> <a 
 id="x13-26700011.3.1"></a>File Manager</h4>
<!--l. 41--><p class="noindent" >The <a 
href="mainli2.html#glo:filemanager">File Manager</a> exists to manage multiple distributed file systems. This interface allows
these file systems to act as a single entity, though they may span multiple physical
file systems on different pieces of hardware. This provides for a distributed file system
that functions as a single file system across multiple <a 
href="mainli2.html#glo:devicemanager">Device Managers</a> and the <a 
href="mainli2.html#glo:domainmanager">Domain
Manager</a>.
<!--l. 45--><p class="noindent" >The <a 
href="mainli2.html#glo:filemanager">File Manager</a> inherits the <a 
href="mainap9.html#idl">IDL</a> interface of a File System. It then delegates tasks from the Core
Framework based off of the path names to the correct mounted File System, depending on where
that File System is mounted. It is also responsible for copying the appropriate <a 
href="mainli2.html#glo:component">Component</a>
files into the specific <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>&#8217;s File System as <a 
href="mainli2.html#glo:application">Applications</a> are installed and
launched.
<h3 class="sectionHead"><span class="titlemark">11.4   </span> <a 
 id="x13-26800011.4"></a>Applications</h3>
<!--l. 3--><p class="noindent" ><a 
href="mainli2.html#glo:application">Applications</a> are software objects representing <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a>. They are used to organize a group of
<a 
href="mainli2.html#glo:component">Components</a> that are linked together to accomplish a useful computational task. <a 
href="mainli2.html#glo:application">Applications</a>
provide a convenient way to move data around in order to achieve these different tasks by allowing
for <a 
href="mainli2.html#glo:component">Components</a> to easily be interchanged.
                                                                                         
                                                                                         
<!--l. 7--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.1   </span> <a 
 id="x13-26900011.4.1"></a>Application Class</h4>
<!--l. 9--><p class="noindent" >Each <a 
href="mainli2.html#glo:application">Application</a> contains a unique <a 
href="mainli2.html#glo:application">Application</a> name and profile, which describes the
<a 
href="mainli2.html#glo:application">Application</a>&#8217;s configuration. This profile is a <a 
href="mainap9.html#sad">SAD</a> file that is referenced by a <a 
href="mainli2.html#glo:filemanager">File Manager</a>.
<!--l. 12--><p class="noindent" >An <span 
class="ectt-1200">Application </span>object is responsible for providing control, configuration, and status of any
<a 
href="mainli2.html#glo:application">Application</a> that is instantiated in the <a 
href="mainli2.html#glo:domain">Domain</a>. In order to accomplish this, each <span 
class="ectt-1200">Application</span>
object maintains various data structures to monitor all aspects of its execution.
<!--l. 15--><p class="noindent" >A list of <a 
href="mainap9.html#spd">SPD</a> implementation <a 
href="mainap9.html#id">ID</a>s and a list of Process Identifiers (<a 
href="mainap9.html#pid">PID</a>s) are kept for each
<a 
href="mainli2.html#glo:component">Component</a> that makes up the <a 
href="mainli2.html#glo:application">Application</a> in order to manage their life cycles. Since every
<a 
href="mainli2.html#glo:component">Component</a> has to be associated with at least one <a 
href="mainli2.html#glo:device">Device</a>, each <a 
href="mainli2.html#glo:component">Component</a> is also stored in a list
with the <a 
href="mainli2.html#glo:device">Device</a> that it uses, is loaded on or is executed on.
<!--l. 18--><p class="noindent" >Upon completion, the <span 
class="ectt-1200">Application</span>&#8217;s <span 
class="ectt-1200">releaseObject() </span>function is responsible for various clean up
tasks. Any task or process allocated on Executable <a 
href="mainli2.html#glo:device">Devices</a> are stopped using the <span 
class="ectt-1200">terminate()</span>
function. All memory allocated by <a 
href="mainli2.html#glo:component">Component</a> instances on Loadable <a 
href="mainli2.html#glo:device">Devices</a> is freed using the
<span 
class="ectt-1200">unload() </span>function. Finally, any additional capacities or resources that were allocated during
creation are released using the <a 
href="mainli2.html#glo:device">Device</a>&#8217;s <span 
class="ectt-1200">deallocateCapacity() </span>method. These changes return the
<a 
href="mainli2.html#glo:device">Devices</a> to the state they were in before the <a 
href="mainli2.html#glo:application">Application</a> was launched (the state of the <a 
href="mainli2.html#glo:device">Devices</a>
may not have changed during <a 
href="mainli2.html#glo:application">Application</a> execution).
<!--l. 22--><p class="noindent" >All object references to <a 
href="mainli2.html#glo:component">Components</a> that make up the <a 
href="mainli2.html#glo:application">Application</a> are released and all connected
<a 
href="mainli2.html#glo:port">Ports</a> are disconnected. Any consumers or producers that were connected to a <a 
href="mainap9.html#corba">CORBA</a> <a 
href="mainli2.html#glo:eventchannel">Event
Channel</a> are removed. Finally, all <a 
href="mainli2.html#glo:component">Component</a>&#8217;s naming contexts are unbound from the <a 
href="mainli2.html#glo:namingservice">Naming
Service</a>.
<!--l. 25--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.2   </span> <a 
 id="x13-27000011.4.2"></a>SAD File</h4>
<!--l. 27--><p class="noindent" >The <a 
href="mainap9.html#sad">SAD</a> File is where information about a <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>&#8217;s composition and configuration is stored. It
is an <a 
href="mainap9.html#xml">XML</a> file that contains tags for all of the elements required for the <a 
href="mainli2.html#glo:application">Application</a> to be
built and is located in: <span 
class="ectt-1200">$SDRROOT/dev/waveforms/WAVE_NAME</span>. This file is parsed by
the runtime environment and used by an <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> to construct the desired
<a 
href="mainli2.html#glo:waveformapplication">Waveform</a>.
<!--l. 31--><p class="noindent" >Individual elements of the file include:
      <ul class="itemize1">
      <li class="itemize">References to all required <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainap9.html#spd">SPD</a> and their locations
      </li>
      <li class="itemize">Required connections between the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainli2.html#glo:port">Ports</a> and interfaces
                                                                                         
                                                                                         
      </li>
      <li class="itemize">External <a 
href="mainli2.html#glo:port">Ports</a>
      </li>
      <li class="itemize">Required connections to <a 
href="mainli2.html#glo:device">Devices</a>
      </li>
      <li class="itemize">Name given in <a 
href="mainli2.html#glo:namingservice">Naming Service</a>
      </li>
      <li class="itemize">Co-Location (deployment) dependencies
      </li>
      <li class="itemize"><a 
href="mainli2.html#glo:assemblycontroller">Assembly Controller</a>
      </li>
      <li class="itemize">Start order of the <a 
href="mainli2.html#glo:component">Components</a></li></ul>
<!--l. 43--><p class="noindent" >Within the <a 
href="mainap9.html#sad">SAD</a> file, each <a 
href="mainli2.html#glo:component">Component</a> instantiation has a unique <a 
href="mainap9.html#id">ID</a>, which allows support for
multiple instantiations of the same <a 
href="mainli2.html#glo:component">Component</a>. In this situation, each <a 
href="mainli2.html#glo:component">Component</a> would have the
same file reference, a unique <a 
href="mainap9.html#id">ID</a>s, as well as a unique name in the <a 
href="mainli2.html#glo:namingservice">Naming Service</a> that is based off
of the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s usage name. For multiple instantiations of the same <a 
href="mainli2.html#glo:component">Component</a>, the trailing
digit on the usage name is simply incremented.
<!--l. 47--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.3   </span> <a 
 id="x13-27100011.4.3"></a>Assembly Controller and Start Order</h4>
<!--l. 49--><p class="noindent" >Each <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> has only one <a 
href="mainli2.html#glo:assemblycontroller">Assembly Controller</a> that serves as the starting point for the
<a 
href="mainli2.html#glo:application">Application</a>. The <a 
href="mainli2.html#glo:component">Component</a> that is marked as the <a 
href="mainli2.html#glo:assemblycontroller">Assembly Controller</a> is responsible for
delegating implementations of the inherited CF::Resource functions that include:
      <ul class="itemize1">
      <li class="itemize">start()
      </li>
      <li class="itemize">stop()
      </li>
      <li class="itemize">configure()
      </li>
      <li class="itemize">query()</li></ul>
                                                                                         
                                                                                         
<!--l. 58--><p class="noindent" >By default, the first <a 
href="mainli2.html#glo:component">Component</a> added to a <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> is the <a 
href="mainli2.html#glo:assemblycontroller">Assembly Controller</a>. However, the
<a 
href="mainli2.html#glo:assemblycontroller">Assembly Controller</a> can be changed to any <a 
href="mainli2.html#glo:component">Component</a> in the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> by right-clicking on the
<a 
href="mainli2.html#glo:component">Component</a> in the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> diagram and selecting <span 
class="ecbx-1200">Set As </span><a 
href="mainli2.html#glo:assemblycontroller"><span 
class="ecbx-1200">Assembly Controller</span></a> from the
context menu.
<!--l. 60--><p class="noindent" ><hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
>
                                                                                         
                                                                                         
<a 
 id="x13-271001r7"></a>
                                                                                         
                                                                                         
<!--l. 63--><p class="noindent" ><img 
src="images/RuntimeEnvironmentInDepth/assembly_controller.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.7: </td><td  
class="content">Assembly Controller Assignment</td></tr></table><!--tex4ht:label?: x13-271001r7 -->
                                                                                         
                                                                                         
<!--l. 65--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
<!--l. 67--><p class="noindent" >In the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> diagram, the circled number in the <a 
href="mainli2.html#glo:component">Component</a> indicates the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s
designated start order. This is the order that the <span 
class="ectt-1200">start() </span>function is called on the <a 
href="mainli2.html#glo:component">Components</a>
within the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>.
<!--l. 69--><p class="noindent" ><div class="admonition block note block-indent"><div class="note-inner"><p class="para block block-first"> The <a 
href="mainli2.html#glo:assemblycontroller">Assembly Controller</a> is always started first. </p></div></div>
<!--l. 73--><p class="noindent" >To modify the start order:
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-271003x1">In the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> diagram, right-click the <a 
href="mainli2.html#glo:component">Component</a> for which you want to change
      the start order.
      </li>
      <li 
  class="enumerate" id="x13-271005x2">Select <span 
class="ecbx-1200">Move Start Order Earlier </span>to start the <a 
href="mainli2.html#glo:component">Component</a> earlier.
      </li>
      <li 
  class="enumerate" id="x13-271007x3">Select <span 
class="ecbx-1200">Move Start Order Later </span>to start the <a 
href="mainli2.html#glo:component">Component</a> later. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-271008r8"></a> <a 
 id="x13-2710063"></a><img 
src="images/RuntimeEnvironmentInDepth/start_order.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.8: </td><td  
class="content">Start Order Assignment</td></tr></table><!--tex4ht:label?: x13-271008r8 -->
      <!--l. 84--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li></ol>
<h4 class="subsectionHead"><span class="titlemark">11.4.4   </span> <a 
 id="x13-27200011.4.4"></a>Host Collocation</h4>
<!--l. 89--><p class="noindent" >To address varying performance considerations, some application designs may require multiple
<a 
href="mainli2.html#glo:component">Components</a> be deployed on the same piece of hardware. To meet this type of requirement, in the
<span 
class="ectt-1200">sad.xml </span>file, you can specify that a set of <a 
href="mainli2.html#glo:component">Components</a> be collocated on a single host at
runtime.
<!--l. 93--><p class="noindent" >To collocate <a 
href="mainli2.html#glo:component">Components</a> in the <a 
href="mainap9.html#ide">IDE</a>:
<!--l. 95--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-272002x1">Open the <span 
class="ecbx-1200">Advanced </span>section of the Palette.
      </li>
      <li 
  class="enumerate" id="x13-272004x2">Select <span 
class="ecbx-1200">Host Collocation</span>. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-272005r9"></a> <a 
 id="x13-2720032"></a><img 
src="images/RuntimeEnvironmentInDepth/select_host_collocation.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.9: </td><td  
class="content">Select Host Collocation from the Advanced section of the Palette</td></tr></table><!--tex4ht:label?: x13-272005r9 -->
      <!--l. 103--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-272007x3">Drag <span 
class="ecbx-1200">Host Collocation </span>onto the Diagram to create a Collocated area.
                                                                                         
                                                                                         
      </li>
      <li 
  class="enumerate" id="x13-272009x4">Give the collocated area a name. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-272010r10"></a> <a 
 id="x13-2720084"></a><img 
src="images/RuntimeEnvironmentInDepth/create_collocation.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.10: </td><td  
class="content">Name Host Collocation</td></tr></table><!--tex4ht:label?: x13-272010r10 -->
      <!--l. 111--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-272012x5">Add desired <a 
href="mainli2.html#glo:component">Components</a> to the collocated area. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-272013r11"></a> <a 
 id="x13-2720115"></a><img 
src="images/RuntimeEnvironmentInDepth/add_components.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.11: </td><td  
class="content">Add Components to Host Collocation</td></tr></table><!--tex4ht:label?: x13-272013r11 -->
      <!--l. 118--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-272015x6">Finalize other <a 
href="mainli2.html#glo:component">Component</a> connections. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-272016r12"></a> <a 
 id="x13-2720146"></a><img 
src="images/RuntimeEnvironmentInDepth/final_collocation.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.12: </td><td  
class="content">Finalize other Component connections</td></tr></table><!--tex4ht:label?: x13-272016r12 -->
      <!--l. 125--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li></ol>
<!--l. 129--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.5   </span> <a 
 id="x13-27300011.4.5"></a>External Ports</h4>
<!--l. 131--><p class="noindent" >Within the REDHAWK Framework, a particular <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainli2.html#glo:port">Port</a> can be designated as an
external <a 
href="mainli2.html#glo:port">Port</a> so that it is accessible to external <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> objects. Using external <a 
href="mainli2.html#glo:port">Ports</a>, a complex
<a 
href="mainli2.html#glo:waveformapplication">Waveform</a> may be subdivided into smaller more manageable <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a>. Marking a <a 
href="mainli2.html#glo:port">Port</a> as
external adds an <span 
class="ectt-1200">external </span><a 
href="mainli2.html#glo:port">Ports</a> tag in the <a 
href="mainap9.html#sad">SAD</a> <a 
href="mainap9.html#xml">XML</a> file containing the <a 
href="mainli2.html#glo:component">Component</a> instance
that owns the <a 
href="mainli2.html#glo:port">Port</a> in question. Additionally, the color of the <a 
href="mainli2.html#glo:port">Port</a>&#8217;s block in the diagram changes
color to mark it as externally accessible. For information about marking a Port as external, refer to
<a 
href="mainch14.html#x16-34600014.4.2.3">Section 14.4.2.3</a>.
<!--l. 135--><p class="noindent" >External <a 
href="mainli2.html#glo:port">Ports</a> can be renamed in the Overview tab of the <a 
href="mainli2.html#glo:application">Application</a>&#8217;s <a 
href="mainap9.html#sad">SAD</a> file. Renaming a
<a 
href="mainli2.html#glo:port">Port</a> enables other <a 
href="mainli2.html#glo:application">Applications</a> to access the <a 
href="mainli2.html#glo:port">Port</a> with a different name instance than the one
specified in the <a 
href="mainli2.html#glo:component">Components</a> <a 
href="mainap9.html#scd">SCD</a> file, thus preventing naming collision. For information about
renaming an external <a 
href="mainli2.html#glo:port">Port</a>, refer to <a 
href="mainch14.html#x16-34400014.4.2.1">Section 14.4.2.1</a>.
<!--l. 138--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.6   </span> <a 
 id="x13-27400011.4.6"></a>External Properties</h4>
<!--l. 140--><p class="noindent" >Individual <a 
href="mainli2.html#glo:component">Component</a> <a 
href="mainli2.html#glo:property">Properties</a> can be promoted as external in the <a 
href="mainli2.html#glo:property">Properties</a> tab of the
<a 
href="mainli2.html#glo:application">Application</a>&#8217;s <a 
href="mainap9.html#sad">SAD</a> file, which enables other <a 
href="mainli2.html#glo:application">Applications</a> to access these internal <a 
href="mainli2.html#glo:property">Property</a> values
through <span 
class="ectt-1200">configure() </span>and <span 
class="ectt-1200">query()</span>. To prevent naming collision, the <a 
href="mainli2.html#glo:property">Property</a> <a 
href="mainap9.html#id">ID</a> can also be
                                                                                         
                                                                                         
assigned an external <a 
href="mainap9.html#id">ID</a>. If no external <a 
href="mainap9.html#id">ID</a> is specified, the internal <a 
href="mainli2.html#glo:property">Property</a> <a 
href="mainap9.html#id">ID</a> from the
<a 
href="mainli2.html#glo:component">Components</a> <a 
href="mainap9.html#prf">PRF</a> file is used as its external <a 
href="mainap9.html#id">ID</a>. For information about making a <a 
href="mainli2.html#glo:property">Property</a>
external, refer to <a 
href="mainch14.html#x16-34500014.4.2.2">Section 14.4.2.2</a>.
<!--l. 144--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.7   </span> <a 
 id="x13-27500011.4.7"></a>Using the Find By Feature</h4>
<!--l. 147--><p class="noindent" >A Find By represents an object within a REDHAWK <a 
href="mainli2.html#glo:domain">Domain</a> that will be available at runtime
(when the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> is launched in a <a 
href="mainli2.html#glo:domain">Domain</a>). Find Bys contain details that describe the
object. For example, the details may specify that it is a <a 
href="mainli2.html#glo:domain">Domain</a> manager or it is a
Service with a specific name. When a <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> is launched in a <a 
href="mainli2.html#glo:domain">Domain</a>, the Find
By details help to locate the appropriate object, and then any connections the user
specified in the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a> are established. Those connections are sometimes directly to the
object itself, or sometimes to ports on the object, depending on the context. You can
search for a resource by name, a <a 
href="mainli2.html#glo:service">Service</a> by name or type, or an <a 
href="mainli2.html#glo:eventchannel">Event Channel</a> by
name.
<!--l. 149--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.4.7.1   </span> <a 
 id="x13-27600011.4.7.1"></a>Find By Name</h5>
<!--l. 151--><p class="noindent" >To find a resource in the domain by name:
<!--l. 163--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-276002x1">From the <span 
class="ecbx-1200">Palette</span>, in the <span 
class="ecbx-1200">Find By </span>folder, select <span 
class="ecbx-1200">Find By Name </span>and drag it onto
      the diagram.
      <!--l. 166--><p class="noindent" >The <span 
class="ecbx-1200">Find By Name </span>dialog is displayed. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-276003r13"></a> <a 
 id="x13-2760011"></a><img 
src="images/ide/usingChap/editorAndViews/FindByName.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.13: </td><td  
class="content">Find By Name</td></tr></table><!--tex4ht:label?: x13-276003r13 -->
      <!--l. 172--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-276005x2">Enter the name of the <a 
href="mainli2.html#glo:component">Component</a> you want to find.
      </li>
      <li 
  class="enumerate" id="x13-276007x3">Optionally, enter the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainli2.html#glo:port">Ports</a> names that you want to use. For Provides <a 
href="mainli2.html#glo:port">Ports</a>,
      enter the name and click <span 
class="ecbx-1200">Add Provides </span><a 
href="mainli2.html#glo:port"><span 
class="ecbx-1200">Port</span></a>. For Uses <a 
href="mainli2.html#glo:port">Ports</a>, enter the name and click
      <span 
class="ecbx-1200">Add Uses </span><a 
href="mainli2.html#glo:port"><span 
class="ecbx-1200">Port</span></a>.
                                                                                         
                                                                                         
      </li>
      <li 
  class="enumerate" id="x13-276009x4">Click <span 
class="ecbx-1200">Finish</span>.
      <!--l. 177--><p class="noindent" >The <span 
class="ecbx-1200">Find By Name </span>is displayed in the diagram.</li></ol>
<!--l. 190--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.4.7.2   </span> <a 
 id="x13-27700011.4.7.2"></a>Find By Service</h5>
<!--l. 192--><p class="noindent" >To find a <a 
href="mainli2.html#glo:service">Service</a> in the domain:
<!--l. 194--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-277002x1">From the <span 
class="ecbx-1200">Palette</span>, in the <span 
class="ecbx-1200">Find By </span>folder, select <span 
class="ecbx-1200">Service </span>and drag it onto the
      diagram. The <span 
class="ecbx-1200">Find By Service </span>dialog is displayed. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-277003r14"></a> <a 
 id="x13-2770011"></a><img 
src="images/Findbyservice.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.14: </td><td  
class="content">Find By Service</td></tr></table><!--tex4ht:label?: x13-277003r14 -->
      <!--l. 202--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-277005x2">If you want to search for a <a 
href="mainli2.html#glo:service">Service</a> Name, select the <span 
class="ecbx-1200">Service Name </span>radio button and enter
      the <a 
href="mainli2.html#glo:service">Service</a> Name you want to find.
      </li>
      <li 
  class="enumerate" id="x13-277007x3">If you want to search for a <a 
href="mainli2.html#glo:service">Service</a> Type, select the <span 
class="ecbx-1200">Service Type </span>radio button and enter the
      <a 
href="mainli2.html#glo:service">Service</a> Type you want to find. The <a 
href="mainli2.html#glo:service">Service</a> Type indicates the interface (IDL) provided by
      the <a 
href="mainli2.html#glo:service">Service</a>. Click <span 
class="ecbx-1200">Browse </span>to select an IDL type the IDE recognizes.
      </li>
      <li 
  class="enumerate" id="x13-277009x4">Optionally, enter the <a 
href="mainli2.html#glo:component">Component</a>&#8217;s <a 
href="mainli2.html#glo:port">Ports</a> names that you want to use. For Provides <a 
href="mainli2.html#glo:port">Ports</a>,
      enter the name and click <span 
class="ecbx-1200">Add Provides </span><a 
href="mainli2.html#glo:port"><span 
class="ecbx-1200">Port</span></a>. For Uses <a 
href="mainli2.html#glo:port">Ports</a>, enter the name and click
      <span 
class="ecbx-1200">Add Uses </span><a 
href="mainli2.html#glo:port"><span 
class="ecbx-1200">Port</span></a>.
      </li>
      <li 
  class="enumerate" id="x13-277011x5">Click <span 
class="ecbx-1200">Finish</span>.
      <!--l. 208--><p class="noindent" >The <span 
class="ecbx-1200">Service Name </span>or <span 
class="ecbx-1200">Service Type </span>is displayed in the diagram.</li></ol>
<!--l. 211--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.4.7.3   </span> <a 
 id="x13-27800011.4.7.3"></a>Find By Event Channel</h5>
<!--l. 213--><p class="noindent" >To find an event channel in the domain:
                                                                                         
                                                                                         
<!--l. 215--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-278002x1">From the <span 
class="ecbx-1200">Palette</span>, in the <span 
class="ecbx-1200">Find By </span>folder, select <span 
class="ecbx-1200">Event Channel </span>and drag it onto
      the diagram.
      <!--l. 218--><p class="noindent" >The <span 
class="ecbx-1200">Event Channel </span>dialog is displayed. <hr class="figure"><div class="figure" 
><table class="figure"><tr class="figure"><td class="figure" 
><a 
 id="x13-278003r15"></a> <a 
 id="x13-2780011"></a><img 
src="images/NewEventChannel.png" alt="PIC"  
>
<br /> <table class="caption" 
><tr style="vertical-align:baseline;" class="caption"><td class="id">Figure&#x00A0;11.15: </td><td  
class="content">Event Channel</td></tr></table><!--tex4ht:label?: x13-278003r15 -->
      <!--l. 224--><p class="noindent" ></td></tr></table></div><hr class="endfigure">
      </li>
      <li 
  class="enumerate" id="x13-278005x2">Enter the name of the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a> you want to find and click <span 
class="ecbx-1200">OK</span>.
      <!--l. 227--><p class="noindent" >The <a 
href="mainli2.html#glo:eventchannel"><span 
class="ecbx-1200">Event Channel</span></a> is displayed in the diagram.</li></ol>
<!--l. 230--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.4.8   </span> <a 
 id="x13-27900011.4.8"></a> <span 
class="ecti-1200">usesdevice </span>Relationship</h4>
<!--l. 232--><p class="noindent" >An <a 
href="mainli2.html#glo:application">Application</a> may require that specific <a 
href="mainli2.html#glo:device">Devices</a> are running in order for the <a 
href="mainli2.html#glo:application">Application</a> to be
deployed. The <span 
class="ecti-1200">usesdevice </span>relationship is a mechanism for expressing such a requirement. The
<span 
class="ecti-1200">usesdevice </span>relationship also enables the <a 
href="mainli2.html#glo:application">Application</a> to connect <a 
href="mainli2.html#glo:port">Ports</a> of <a 
href="mainli2.html#glo:component">Components</a> within the
<a 
href="mainap9.html#sad">SAD</a> file to <a 
href="mainli2.html#glo:port">Ports</a> of <a 
href="mainli2.html#glo:device">Devices</a> running in a <a 
href="mainli2.html#glo:node">Node</a>. These specifications are handled through tags in
the <a 
href="mainli2.html#glo:application">Application</a>&#8217;s <a 
href="mainap9.html#sad">SAD</a> <a 
href="mainap9.html#xml">XML</a>, which can contain any number of <span 
class="ecti-1200">usesdevice </span>relationships. Each
<span 
class="ecti-1200">usesdevice </span>relationship has a unique <a 
href="mainap9.html#id">ID</a> with a set of allocation <a 
href="mainli2.html#glo:property">Property</a> dependencies required for
the relationship to be satisfied. (For more information about allocation <a 
href="mainli2.html#glo:property">Properties</a>, refer to <a 
href="mainch9.html#x11-2110009.3.2">Section
9.3.2</a>).
<!--l. 237--><p class="noindent" >The following example <a 
href="mainap9.html#xml">XML</a> expresses the <span 
class="ecti-1200">usesdevice </span>relationship and must reside within the
<span 
class="ectt-1200">softwareassembly </span>element of the <a 
href="mainap9.html#sad">SAD</a> <a 
href="mainap9.html#xml">XML</a> file. The <span 
class="ectt-1200">usesdevicedependencies </span>element must be
the last element within the <span 
class="ectt-1200">softwareassembly </span>element.
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
<usesdevicedependencies>
     <usesdevice id="uses_device_1">
       <propertyref refid="os" value="linux"/>
     </usesdevice>
     <usesdevice id="uses_device_2">
       <structref refid="struct_alloc_prop">
         <simpleref refid="long_capacity" value="10"/>
         <simpleref refid="float_capacity" value="0.1"/>
       </structref>
     </usesdevice>
</usesdevicedependencies>
]]></script>
                                                                                         
                                                                                         
</div>
<!--l. 254--><p class="noindent" >In the above example, there are two <span 
class="ecti-1200">usesdevice </span>dependencies with <a 
href="mainap9.html#id">ID</a>s of <span 
class="ectt-1200">uses_device_1 </span>and
<span 
class="ectt-1200">uses_device_2</span>. The first requires a <a 
href="mainli2.html#glo:property">Property</a> with an <a 
href="mainap9.html#id">ID</a> of <span 
class="ectt-1200">os </span>that matches the value of <span 
class="ectt-1200">linux</span>.
The second requires a <span 
class="ectt-1200">struct </span>with an <a 
href="mainap9.html#id">ID</a> of <span 
class="ectt-1200">struct_alloc_prop </span>with members <span 
class="ectt-1200">long_capacity</span>
and <span 
class="ectt-1200">float_capacity </span>that have the necessary available capacity specified in the <span 
class="ectt-1200">value</span>
tag.
<!--l. 258--><p class="noindent" >Once these dependencies have been declared, <a 
href="mainli2.html#glo:port">Port</a> connections can be made in the connections
section of the <a 
href="mainap9.html#sad">SAD</a> <a 
href="mainap9.html#xml">XML</a> file. The following example makes two connections. The first
connection is from the <a 
href="mainli2.html#glo:port">Port</a>: <span 
class="ectt-1200">output_port </span>of <span 
class="ectt-1200">Component_1 </span>to the <a 
href="mainli2.html#glo:port">Port</a>: <span 
class="ectt-1200">input_port </span>of the
<a 
href="mainli2.html#glo:device">Device</a> that satisfies the <span 
class="ectt-1200">uses_device_1 </span>relationship. The second is from the <a 
href="mainli2.html#glo:port">Port</a>:
<span 
class="ectt-1200">output_port </span>of the <a 
href="mainli2.html#glo:device">Device</a> that satisfies the <span 
class="ectt-1200">uses_device_2 </span>relationship to the <a 
href="mainli2.html#glo:port">Port</a>:
<span 
class="ectt-1200">input_port </span>of <span 
class="ectt-1200">Component_2</span>.
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
  <connections>
     <connectinterface id="connection_1">
       <usesport>
         <usesidentifier>output_port</usesidentifier>
         <componentinstantiationref refid="Component_1"/>
       </usesport>
       <providesport>
         <providesidentifier>input_port</providesidentifier>
         <deviceusedbyapplication usesrefid="uses_device_1"/>
       </providesport>
     </connectinterface>
     <connectinterface id="connection_2">
       <usesport>
         <usesidentifier>output_port</usesidentifier>
         <deviceusedbyapplication usesrefid="uses_device_2"/>
       </usesport>
       <providesport>
         <providesidentifier>input_port</providesidentifier>
         <componentinstantiationref refid="Component_2"/>
       </providesport>
     </connectinterface>
  </connections>

]]></script></div>
                                                                                         
                                                                                         
<h3 class="sectionHead"><span class="titlemark">11.5   </span> <a 
 id="x13-28000011.5"></a>The Application Factory</h3>
<!--l. 3--><p class="noindent" >The <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> is responsible for the creation of <a 
href="mainli2.html#glo:application">Applications</a> within a <a 
href="mainli2.html#glo:domain">Domain</a>. Whenever
an <a 
href="mainli2.html#glo:application">Application</a> is installed by the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>, an <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> is created from tags in
the <a 
href="mainli2.html#glo:application">Application</a>&#8217;s <a 
href="mainap9.html#sad">SAD</a> file, in order to deploy <a 
href="mainli2.html#glo:component">Components</a> of the <a 
href="mainli2.html#glo:application">Application</a> to <a 
href="mainli2.html#glo:device">Devices</a> based on
their implementation dependencies.
<!--l. 6--><p class="noindent" >When the <span 
class="ectt-1200">create() </span>function is called, the <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> uses the <a 
href="mainap9.html#spd">SPD</a> <span 
class="ectt-1200">implementation</span>
element to locate <a 
href="mainli2.html#glo:device">Devices</a> that are capable of loading and executing the given <a 
href="mainli2.html#glo:component">Component</a>. The
<a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> does this by first assembling a list of all of the allocation <a 
href="mainli2.html#glo:property">Properties</a> required
by the <a 
href="mainli2.html#glo:component">Components</a> that make up its <a 
href="mainli2.html#glo:application">Application</a>. It then searches through each of the candidate
<a 
href="mainli2.html#glo:device">Devices</a> for <a 
href="mainli2.html#glo:property">Properties</a> whose <span 
class="ectt-1200">kindtype </span>is <span 
class="ectt-1200">allocation </span>and <span 
class="ectt-1200">action </span>is not <span 
class="ectt-1200">external</span>. It attempts to
use that <a 
href="mainli2.html#glo:device">Devices</a> <span 
class="ectt-1200">allocateCapacity() </span>function in order to compare the requested capacities with
the <a 
href="mainli2.html#glo:device">Devices</a> available resources.
<!--l. 11--><p class="noindent" >The creation of the <a 
href="mainli2.html#glo:application">Application</a> fails if the <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> is unable to deploy all of the
<a 
href="mainli2.html#glo:component">Components</a> in compliance with the <a 
href="mainli2.html#glo:component">Components</a>&#8217; dependencies and host-collocation requirements
given the available <a 
href="mainli2.html#glo:device">Devices</a>.
<!--l. 13--><p class="noindent" >Once the resource marshaling has been successfully completed, the <a 
href="mainli2.html#glo:filemanager">File Manager</a> copies the
appropriate <a 
href="mainli2.html#glo:component">Component</a> files into the specific <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>&#8217;s File System and the <a 
href="mainli2.html#glo:applicationfactory">Application
Factory</a> performs the <span 
class="ectt-1200">load() </span>and <span 
class="ectt-1200">execute() </span>operations in order to launch the <a 
href="mainli2.html#glo:component">Component</a> on its
assigned <a 
href="mainli2.html#glo:device">Device</a>. It then continues to initialize, connect and configure the <a 
href="mainli2.html#glo:component">Components</a>. <a 
href="mainli2.html#glo:property">Properties</a>
can also be overridden from the <span 
class="ectt-1200">componentproperties </span>tags in the <a 
href="mainli2.html#glo:waveformapplication">Waveform</a>&#8217;s <a 
href="mainap9.html#sad">SAD</a>
file.
<!--l. 3--><p class="noindent" >
<h3 class="sectionHead"><span class="titlemark">11.6   </span> <a 
 id="x13-28100011.6"></a>The Device Manager</h3>
<!--l. 5--><p class="noindent" >The <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> interface is used to manage a set of logical <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:service">Services</a> and a File
System. The <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> is responsible for parsing the <a 
href="mainli2.html#glo:node">Node</a>&#8217;s <a 
href="mainap9.html#dcd">DCD</a> <a 
href="mainap9.html#xml">XML</a> in order to fork
processes for all <a 
href="mainli2.html#glo:device">Devices</a> and <a 
href="mainli2.html#glo:service">Services</a> in the <a 
href="mainli2.html#glo:node">Node</a>. Each process gets passed a list of command-line
character strings as executable parameters that are <a 
href="mainli2.html#glo:node">Node</a>-specific configuration variables read from
the <a 
href="mainap9.html#dcd">DCD</a> file.
<!--l. 9--><p class="noindent" >Once a child process has been forked, its reference is added to a pending list in the <a 
href="mainli2.html#glo:devicemanager">Device
Manager</a>, while the child process is initialized and configured (possibly with overloaded <a 
href="mainli2.html#glo:property">Property</a>
values). After that, it registers itself with the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>, moving its reference from the
pending list into a registered list. These lists allow the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> to have knowledge of the
status of all <a 
href="mainli2.html#glo:device">Devices</a> and <a 
href="mainli2.html#glo:service">Services</a> contained within its <a 
href="mainli2.html#glo:node">Node</a>. Once all children have been launched,
instantiated, and configured, the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> connects the <a 
href="mainli2.html#glo:device">Devices</a> as described by the <a 
href="mainap9.html#dcd">DCD</a>
file.
                                                                                         
                                                                                         
<!--l. 14--><p class="noindent" >The <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> also responds to signals from any of its child processes. Upon exit of a
child, the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> cleans up the bookkeeping by removing any references to the
process from the pending or registered lists and unbinding its name from the <a 
href="mainli2.html#glo:namingservice">Naming
Service</a>.
<!--l. 17--><p class="noindent" >The <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> also has a signal handler for <span 
class="ectt-1200">SIGINT</span>, <span 
class="ectt-1200">SIGQUIT </span>and <span 
class="ectt-1200">SIGTERM </span>that triggers a
shutdown of the <a 
href="mainli2.html#glo:node">Node</a>. The <a 
href="mainli2.html#glo:node">Node</a> shutdown process unregisters and calls releaseObject on all
<a 
href="mainli2.html#glo:service">Services</a> and <a 
href="mainli2.html#glo:device">Devices</a>, kills off all of the child processes, and unbinds any remaining names,
including itself, from the <a 
href="mainli2.html#glo:namingservice">Naming Service</a>.
<!--l. 19--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.6.1   </span> <a 
 id="x13-28200011.6.1"></a>Launching a Device Manager from the Command Line</h4>
<!--l. 21--><p class="noindent" >To launch a <a 
href="mainli2.html#glo:device">Device</a> from the command line, a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> must be up and running.
<div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
nodeBooter -d /nodes/DevMgr_localhost.localdomain/DeviceManager.dcd.xml
INFO:DeviceManager - Starting Device Manager with
/nodes/DevMgr_localhost.localdomain/DeviceManager.dcd.xml
INFO:DeviceManager_impl - Connecting to Domain Manager REDHAWK_DEV/REDHAWK_DEV
INFO:DeviceManager - Starting ORB!
INFO:DCE:9d9bcc38-d654-43b1-8b74-1dc024318b6f:Registering Device
INFO:DeviceManager_impl - Registering device GPP_localhost_localdomain on
Device Manager DevMgr_localhost.localdomain
INFO:DeviceManager_impl - Initializing device GPP_localhost_localdomain on
Device Manager DevMgr_localhost.localdomain
INFO:DeviceManager_impl - Registering device GPP_localhost_localdomain on
Domain Manager
]]></script></div>
<!--l. 38--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.6.2   </span> <a 
 id="x13-28300011.6.2"></a>DCD File</h4>
<!--l. 40--><p class="noindent" >The <a 
href="mainap9.html#dcd">DCD</a> file is an <a 
href="mainap9.html#xml">XML</a> file that contains the necessary information to configure a <a 
href="mainli2.html#glo:node">Node</a>, which is
a specific instance of a <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>, as well as all <a 
href="mainli2.html#glo:device">Devices</a> and <a 
href="mainli2.html#glo:service">Services</a> associated with that
<a 
href="mainli2.html#glo:devicemanager">Device Manager</a> instance. The <a 
href="mainap9.html#dcd">DCD</a> file contains information about the <a 
href="mainli2.html#glo:device">Devices</a> and <a 
href="mainli2.html#glo:service">Services</a>
associated with a <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>, where to look for a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>, and other configuration
information for <a 
href="mainli2.html#glo:device">Devices</a> and <a 
href="mainli2.html#glo:service">Services</a>. The file is named: <span 
class="ectt-1200">DeviceManager.dcd.xml </span>and is located
at: <span 
class="ectt-1200">$SDRROOT/dev/nodes/NODE_NAME</span>.
                                                                                         
                                                                                         
<!--l. 44--><p class="noindent" >Information that is covered in this file includes:
      <ul class="itemize1">
      <li class="itemize"><a 
href="mainli2.html#glo:devicemanager">Device Manager</a> name
      </li>
      <li class="itemize"><a 
href="mainli2.html#glo:devicemanager">Device Manager</a> <a 
href="mainap9.html#id">ID</a>
      </li>
      <li class="itemize">References to required <a 
href="mainli2.html#glo:device">Devices</a> <a 
href="mainap9.html#spd">SPD</a> files
      </li>
      <li class="itemize">References to required <a 
href="mainli2.html#glo:service">Services</a> <a 
href="mainap9.html#spd">SPD</a> files
      </li>
      <li class="itemize">The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>&#8217;s <a 
href="mainli2.html#glo:namingservice">Naming Service</a> name
      </li>
      <li class="itemize">Any required <a 
href="mainli2.html#glo:device">Device</a> connections</li></ul>
<!--l. 55--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.6.3   </span> <a 
 id="x13-28400011.6.3"></a>Nodes</h4>
<!--l. 57--><p class="noindent" ><a 
href="mainli2.html#glo:node">Nodes</a> are the collection of <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:service">Services</a>, and connections associated with a single <a 
href="mainli2.html#glo:devicemanager">Device
Manager</a> instance. There is always only one <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> per <a 
href="mainli2.html#glo:node">Node</a>. <a 
href="mainli2.html#glo:node">Nodes</a> are deployed on a
<a 
href="mainli2.html#glo:domain">Domain</a> to give the <a 
href="mainli2.html#glo:application">Applications</a> the ability to communicate with the systems hardware. Upon
creation of an <a 
href="mainli2.html#glo:application">Application</a>, the <a 
href="mainli2.html#glo:applicationfactory">Application Factory</a> attempts to place each required <a 
href="mainli2.html#glo:component">Component</a> on
a <a 
href="mainli2.html#glo:device">Device</a> that is deployed in a <a 
href="mainli2.html#glo:node">Node</a>.
<!--l. 61--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.6.4   </span> <a 
 id="x13-28500011.6.4"></a>Devices</h4>
<!--l. 63--><p class="noindent" >In REDHAWK, <a 
href="mainli2.html#glo:device">Devices</a> are specialized <a 
href="mainli2.html#glo:component">Components</a> that perform command and control of
hardware. They are proxies that are able to run in the <a 
href="mainli2.html#glo:domain">Domain</a> and provide a single point to
interact with one or more pieces of physical hardware.
<!--l. 66--><p class="noindent" ><a 
href="mainli2.html#glo:device">Devices</a> communicate with various pieces of hardware in order to keep track of their capacities.
When <a 
href="mainli2.html#glo:waveformapplication">Waveforms</a> are deployed and the hardware resources are allocated, the <a 
href="mainli2.html#glo:device">Devices</a> keep track of
the amount of any specific resource that was used, and what is still currently available. This is a
important because it keeps <a 
href="mainli2.html#glo:component">Components</a> from attempting to over-allocate on any one piece of
hardware.
                                                                                         
                                                                                         
<!--l. 70--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.6.4.1   </span> <a 
 id="x13-28600011.6.4.1"></a>Using Valgrind to Debug Devices</h5>
<!--l. 72--><p class="noindent" >The <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> supports launching <a 
href="mainli2.html#glo:device">Devices</a> using Valgrind, an open source tool that helps
detect memory errors and leaks.
<!--l. 74--><p class="noindent" >The <span 
class="ectt-1200">VALGRIND </span>environment variable controls this behavior:
      <ul class="itemize1">
      <li class="itemize">If <span 
class="ectt-1200">VALGRIND </span>is not set, <a 
href="mainli2.html#glo:device">Devices</a> launch as usual.
      </li>
      <li class="itemize">If <span 
class="ectt-1200">VALGRIND </span>is set but has no value, the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> searches the path for <span 
class="ectt-1200">valgrind</span>.
      </li>
      <li class="itemize">If <span 
class="ectt-1200">VALGRIND </span>has a value, it is assumed to be the full path to the <span 
class="ectt-1200">valgrind </span>executable.</li></ul>
<!--l. 81--><p class="noindent" >Valgrind log files are written to the <a 
href="mainli2.html#glo:device">Device</a>&#8217;s cache directory (e.g., <span 
class="ectt-1200">$SDRROOT/dev/.MyNode/MyDevice</span>).
The log file name follows the pattern <span 
class="ectt-1200">valgrind.&#x003C;PID&#x003E;.log</span>, where PID is the process ID of the
<a 
href="mainli2.html#glo:device">Device</a>.
<h3 class="sectionHead"><span class="titlemark">11.7   </span> <a 
 id="x13-28700011.7"></a>The Allocation Manager</h3>
<!--l. 3--><p class="noindent" >The <a 
href="mainli2.html#glo:allocationmanager">Allocation Manager</a> provides a single point for creating, inspecting, and delegating allocations.
When using the regular <a 
href="mainli2.html#glo:application">Application</a> deployment mechanism, any allocation associated with
a particular <a 
href="mainli2.html#glo:application">Application</a> is available for inspection on the <a 
href="mainli2.html#glo:allocationmanager">Allocation Manager</a>. The
<a 
href="mainli2.html#glo:allocationmanager">Allocation Manager</a> can also be used by <a 
href="mainli2.html#glo:component">Components</a> or other programs to create new
allocations. Whichever allocation was made through the <a 
href="mainli2.html#glo:allocationmanager">Allocation Manager</a> is available for
inspection.
<!--l. 8--><p class="noindent" >A <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> can register with other <a 
href="mainli2.html#glo:domainmanager">Domain Managers</a>. If a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is
registered with another <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>, then any <a 
href="mainli2.html#glo:usesdevice"><span 
class="ecti-1200">usesdevice </span>relationship</a> allocation
that cannot be satisfied by the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> is delegated to the remote <a 
href="mainli2.html#glo:domainmanager">Domain
Managers</a>.
<h3 class="sectionHead"><span class="titlemark">11.8   </span> <a 
 id="x13-28800011.8"></a>The Connection Manager</h3>
                                                                                         
                                                                                         
<!--l. 3--><p class="noindent" >The <a 
href="mainli2.html#glo:connectionmanager">Connection Manager</a> provides a single point for creation and inspection of connections
between <a 
href="mainli2.html#glo:domain">Domain</a> objects. Connections between <a 
href="mainli2.html#glo:domain">Domain</a> objects can be defined on the <a 
href="mainli2.html#glo:connectionmanager">Connection
Manager</a> irrespective of whether or not these objects are currently deployed. If one or more of the
endpoints defined in a connection are not available, the connection is pending. Connections are
resolved anytime <a 
href="mainli2.html#glo:domain">Domain</a> objects enter or leave the <a 
href="mainli2.html#glo:domain">Domain</a>
<!--l. 8--><p class="noindent" >Endpoints can be <a 
href="mainli2.html#glo:application">Applications</a>, <a 
href="mainli2.html#glo:device">Devices</a>, <a 
href="mainli2.html#glo:service">Services</a>, <a 
href="mainli2.html#glo:eventchannel">Event Channels</a>, or <a 
href="mainap9.html#corba">CORBA</a> object
references.
<h3 class="sectionHead"><span class="titlemark">11.9   </span> <a 
 id="x13-28900011.9"></a>Events</h3>
<!--l. 4--><p class="noindent" >Events are heavily leveraged by REDHAWK to provide system awareness and exchange both
synchronous and asynchronous data. This chapter describes the mechanics of creating and
consuming Events as well as standard Event types defined in REDHAWK and how
they are used. The methodology used to exchange synchronous and asynchronous data,
although reliant on Events as the communications mechanism, is discussed in <a 
href="mainch5.html#x7-1390005.8">Section
5.8</a>.
<!--l. 9--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.9.1   </span> <a 
 id="x13-29000011.9.1"></a>Event Definition</h4>
<!--l. 11--><p class="noindent" ><a 
href="mainap9.html#corba">CORBA</a> defines an interface for the transport of Events as well as an interface for the creation of
<a 
href="mainli2.html#glo:eventchannel">Event Channels</a> that can support a publish/subscribe pattern; within REDHAWK, publishers are
often described as producers, and subscribers are often described as consumers.
<!--l. 13--><p class="noindent" >In REDHAWK, an Event is defined as the payload sent on a single call to the <span 
class="ectt-1200">push() </span>function in
the <span 
class="ectt-1200">PushConsumer </span>interface of the <span 
class="ectt-1200">CosEventComm </span><a 
href="mainap9.html#idl">IDL</a> module.
<!--l. 15--><p class="noindent" >The <span 
class="ectt-1200">PushConsumer </span>interface is as follows:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 interface PushConsumer {
      void push (in any data) raises(Disconnected);
      void disconnect_push_consumer();
 };
]]></script></div>
<!--l. 24--><p class="noindent" >The description of the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a> interface and its use is complicated but luckily unnecessary
for the use of Events in REDHAWK. The main thing to be aware of regarding channels is that
they provide a logical association between a plain text string (channel name) and an object
                                                                                         
                                                                                         
that implements the interfaces necessary to interconnect producers and consumers,
<span 
class="ectt-1200">CosEventChannelAdmin::EventChannel</span>. The <span 
class="ectt-1200">EventChannel </span>interface allows a producer or
consumer to register itself with the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a>. This registration process gives the producer a
reference to a virtual consumer where Events can be pushed (recall that at the end of the day,
<a 
href="mainap9.html#corba">CORBA</a> is just an <a 
href="mainap9.html#rpc">RPC</a> mechanism). The registration process allows the consumer to give a
reference to itself to a virtual producer, so that when an Event becomes available, the correct
function is invoked in the consumer. It is the job of the implementer of the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a>
interface, also known as an <a 
href="mainli2.html#glo:eventservice">Event Service</a>, to maintain the registration interface as well as the
different virtual producers and consumers necessary to re-direct all Events to their appropriate
destinations. The program <span 
class="ectt-1200">omniEvents </span>implements the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a> interface and enables the
publish/subscribe pattern as described above; REDHAWK uses <span 
class="ectt-1200">omniEvents </span>as its <a 
href="mainli2.html#glo:eventservice">Event
Service</a>.
<!--l. 32--><p class="noindent" >An interesting aspect of the <span 
class="ectt-1200">EventChannel </span>interface is that there is no reason why that interface is
implemented on a single central Event broker. It is possible to create a consumer that implements
both a consumer interface and the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a> interface. This allows that consumer to consume
Events either directly from a producer or indirectly through an <a 
href="mainli2.html#glo:eventservice">Event Service</a>. While a central
Event broker like <span 
class="ectt-1200">omniEvents </span>allows for the fluid addition of producers and consumers into the
<a 
href="mainli2.html#glo:domain">Domain</a>, the inherent latency to the distribution of the Event can be significant (a single call for
the publishing of the Event, an intermediate process queuing that Event, and then one or
more pushes for the distribution of the Event to one or more consumers). On the other
hand, a point-to-point connection between a producer and a consumer removes the
intermediary broker and enables low-latency messaging between <a 
href="mainli2.html#glo:component">Components</a>. In REDHAWK,
low-latency point-to-point Events are used only on <a 
href="mainli2.html#glo:message">Messages</a>, which are described in <a 
href="mainch5.html#x7-1390005.8">Section
5.8</a>.
<!--l. 70--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.9.2   </span> <a 
 id="x13-29100011.9.2"></a>Standard REDHAWK Events</h4>
<!--l. 72--><p class="noindent" >REDHAWK has defined several standard Event types that can be used to monitor the overall state
of a <a 
href="mainli2.html#glo:domain">Domain</a> or individual <a 
href="mainli2.html#glo:component">Components</a>. The system management Events are sent over the
<a 
href="mainli2.html#glo:domain">Domain</a> management channels. Individual <a 
href="mainli2.html#glo:component">Component</a> Events are associated with <a 
href="mainli2.html#glo:property">Property</a>
changes.
<!--l. 76--><p class="noindent" >REDHAWK defines an Outgoing Domain Management (<a 
href="mainap9.html#odm">ODM</a>) channel as well as an Incoming
Domain Management (<a 
href="mainap9.html#idm">IDM</a>) channel. The <a 
href="mainap9.html#odm">ODM</a> channel contains Events that are generated by the
<a 
href="mainli2.html#glo:domainmanager">Domain Manager</a> which indicate the addition or removal of entities to and from the <a 
href="mainli2.html#glo:domain">Domain</a>. The
<a 
href="mainap9.html#idm">IDM</a> channel contains Events that are generated by <a 
href="mainli2.html#glo:device">Devices</a> which indicate changes in the state of
a <a 
href="mainli2.html#glo:device">Device</a>.
                                                                                         
                                                                                         
<!--l. 80--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.9.2.1   </span> <a 
 id="x13-29200011.9.2.1"></a>ODM Channel</h5>
<!--l. 82--><p class="noindent" >The <a 
href="mainap9.html#odm">ODM</a> channel contains Event types used to describe the addition or removal of objects from
the <a 
href="mainli2.html#glo:domain">Domain</a>:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 struct DomainManagementObjectAddedEventType {
  string producerId;
  string sourceId;
  string sourceName;
  StandardEvent::SourceCategoryType sourceCategory;
  Object sourceIOR;
 };
]]></script></div>
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 struct DomainManagementObjectRemovedEventType {
  string producerId;
  string sourceId;
  string sourceName;
  StandardEvent::SourceCategoryType sourceCategory;
 };
]]></script></div>
<!--l. 103--><p class="noindent" >Either Event contains information as to who had something added/removed to/from it, the <a 
href="mainap9.html#id">ID</a> of
the entity that was added/removed, the name of the entity that was added/removed, and the
category of item that was added/removed. In the case of an added object, the <a 
href="mainap9.html#ior">IOR</a> (stringified
pointer to the object) is included in the Event.
<!--l. 106--><p class="noindent" >The category of item that was added or removed is of type <span 
class="ectt-1200">SourceCategoryType</span>, which is defined
as:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 enum SourceCategoryType {
  DEVICE_MANAGER,
  DEVICE,
  APPLICATION_FACTORY,
  APPLICATION,
  SERVICE
 };
]]></script></div>
                                                                                         
                                                                                         
<!--l. 118--><p class="noindent" >The <a 
href="mainap9.html#odm">ODM</a> channel can also contain an Event type used to describe the state change of a resource,
like an <a 
href="mainli2.html#glo:application">Application</a>:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 struct ResourceStateChangeEventType {
  string sourceId;
  string sourceName;
  ExtendedEvent::ResourceStateChangeType stateChangeFrom;
  ExtendedEvent::ResourceStateChangeType stateChangeTo;
 }
]]></script></div>
<!--l. 129--><p class="noindent" >where <span 
class="ectt-1200">ExtendedEvent::ResourceStateChangeType </span>is defined as:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 enum ResourceStateChangeType {
  STOPPED,
  STARTED
 }
]]></script></div>
<!--l. 138--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.9.2.2   </span> <a 
 id="x13-29300011.9.2.2"></a>IDM Channel</h5>
<!--l. 140--><p class="noindent" >The <a 
href="mainap9.html#idm">IDM</a> channel can contain a <span 
class="ectt-1200">StateChangeEventType </span>Event or a <span 
class="ectt-1200">AbnormalComponentTerminationEventType</span>
Event. The <span 
class="ectt-1200">StateChangeEventType </span>Event is defined as:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 struct StateChangeEventType {
  string producerId;
  string sourceId;
  StandardEvent::StateChangeCategoryType stateChangeCategory;
  StandardEvent::StateChangeType stateChangeFrom;
  StandardEvent::StateChangeType stateChangeTo;
 };
]]></script></div>
<!--l. 153--><p class="noindent" >The <span 
class="ectt-1200">producerId </span>and <span 
class="ectt-1200">sourceId </span>of the Event type are redundant; they are both the <a 
href="mainap9.html#id"><span 
class="ectt-1200">ID</span></a> of the
<a 
href="mainli2.html#glo:device">Device</a> that is issuing the Event.
<!--l. 155--><p class="noindent" >The <span 
class="ectt-1200">StateChangeCategoryType </span>and <span 
class="ectt-1200">StateChangeType </span>are:
                                                                                         
                                                                                         
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 enum StateChangeCategoryType {
  ADMINISTRATIVE_STATE_EVENT,
  OPERATIONAL_STATE_EVENT,
  USAGE_STATE_EVENT
 };
 enum StateChangeType {
  LOCKED,
  UNLOCKED,
  SHUTTING_DOWN,
  ENABLED,
  DISABLED,
  IDLE,
  ACTIVE,
  BUSY
 };
]]></script></div>
<!--l. 174--><p class="noindent" >The two enumerated types are closely linked; an <span 
class="ectt-1200">ADMINISTRATIVE_STATE_EVENT </span>can only contain
states <span 
class="ectt-1200">LOCKED</span>, <span 
class="ectt-1200">UNLOCKED</span>, and <span 
class="ectt-1200">SHUTTING_DOWN</span>, while an <span 
class="ectt-1200">OPERATIONAL_STATE_EVENT </span>can only
contain states <span 
class="ectt-1200">ENABLED </span>and <span 
class="ectt-1200">DISABLED</span>, and a <span 
class="ectt-1200">USAGE_STATE_EVENT </span>can only contain states <span 
class="ectt-1200">IDLE</span>,
<span 
class="ectt-1200">ACTIVE</span>, or <span 
class="ectt-1200">BUSY</span>.
<!--l. 176--><p class="noindent" >The <span 
class="ectt-1200">AbnormalComponentTerminationEventType </span>Event is defined as:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 struct AbnormalComponentTerminationEventType {
  string deviceId;
  string componentId;
  string applicationId;
 };
]]></script></div>
<!--l. 186--><p class="noindent" >This Event is triggered when a <a 
href="mainli2.html#glo:component">Component</a> abnormally terminates. The Event contains the <a 
href="mainli2.html#glo:device">Device</a>
id that is producing the Event, the <a 
href="mainli2.html#glo:component">Component</a> id that terminated abnormally, and the <a 
href="mainli2.html#glo:application">Application</a>
id that hosts that <a 
href="mainli2.html#glo:component">Component</a>.
<!--l. 188--><p class="noindent" >
<h5 class="subsubsectionHead"><span class="titlemark">11.9.2.3   </span> <a 
 id="x13-29400011.9.2.3"></a>Property Change Events</h5>
<!--l. 190--><p class="noindent" >Whenever a property changes on a <a 
href="mainli2.html#glo:component">Component</a> or <a 
href="mainli2.html#glo:device">Device</a>, either through the internal update of the
                                                                                         
                                                                                         
<a 
href="mainli2.html#glo:component">Component</a> property or through an external configuration update, an event can be triggered. Any
consumer can be registered onto any <a 
href="mainli2.html#glo:component">Component</a> or <a 
href="mainli2.html#glo:device">Device</a> to listen to any arbitrary set of
<a 
href="mainli2.html#glo:property">Properties</a> that the <a 
href="mainli2.html#glo:component">Component</a> or <a 
href="mainli2.html#glo:device">Device</a> may have.
<!--l. 193--><p class="noindent" >The event type is <span 
class="ectt-1200">PropertyChangeEvent</span>, which is defined as:
<div class="minipage"><script type="syntaxhighlighter" class="brush: cpp"><![CDATA[
 struct PropertyChangeEvent {
  string evt_id;
  string reg_id;
  string resource_id;
  CF::Properties properties;
 };
]]></script></div>
<!--l. 276--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.9.3   </span> <a 
 id="x13-29500011.9.3"></a>Cleaning up the Event Service</h4>
<!--l. 278--><p class="noindent" >Sometimes the system will fail in ways that the <a 
href="mainli2.html#glo:eventservice">Event Service</a> (omniEvents) will no longer be
synchronized with the <a 
href="mainli2.html#glo:domain">Domain</a>. When this happens, two utilities have been included
with REDHAWK to help understand the state of the <a 
href="mainli2.html#glo:eventservice">Event Service</a> and clean it up if
necessary.
<!--l. 281--><p class="noindent" >The first tool is <span 
class="ectt-1200">eventl</span>, which lists all of the Events that are currently being handled by the <a 
href="mainli2.html#glo:eventservice">Event
Service</a>. The other tool is <span 
class="ectt-1200">rmeventall</span>, which cleans up all of the <a 
href="mainli2.html#glo:eventchannel">Event Channels</a> that the <a 
href="mainli2.html#glo:eventservice">Event
Service</a> is currently supporting.
<!--l. 284--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.9.4   </span> <a 
 id="x13-29600011.9.4"></a>Consuming Events</h4>
<!--l. 286--><p class="noindent" >Event consumption is meant as a system-level monitoring process. Therefore, REDHAWK
does not include <a 
href="mainli2.html#glo:component">Component</a> <a 
href="mainli2.html#glo:port">Ports</a> that allow the consumption of these Events. To
monitor Events over a given channel, a simple <a 
href="mainap9.html#api">API</a> is available. The <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>
contains the function <span 
class="ectt-1200">registerWithEventChannel() </span>to register a consumer to a given
channel and <span 
class="ectt-1200">unregisterFromEventChannel() </span>to unregister a consumer from an <a 
href="mainli2.html#glo:eventchannel">Event
Channel</a>.
<!--l. 290--><p class="noindent" >A command-line tool is available that registers with <a 
href="mainli2.html#glo:eventchannel">Event Channels</a> and displays the contents of
the channel, <span 
class="ectt-1200">eventviewer</span>. The arguments to <span 
class="ectt-1200">eventviewer </span>are the name of the <a 
href="mainli2.html#glo:domain">Domain</a> and the
name of the channel.
                                                                                         
                                                                                         
<!--l. 293--><p class="noindent" >An example of the use of <span 
class="ectt-1200">eventviewer </span>is described below:
<!--l. 295--><p class="noindent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x13-296002x1">Start a <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>: <div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
nodeBooter -D
]]></script></div>
      </li>
      <li 
  class="enumerate" id="x13-296004x2">In a new terminal, attach the eventviewer to the <a 
href="mainli2.html#glo:domain">Domain</a>&#8217;s <a 
href="mainap9.html#odm">ODM</a> channel:
      <div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
eventviewer REDHAWK_DEV ODM_Channel
Receiving events. Press 'enter' key to exit
]]></script></div>
      </li>
      <li 
  class="enumerate" id="x13-296006x3">In a new terminal, start a <a 
href="mainli2.html#glo:devicemanager">Device Manager</a>:
      <div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
nodeBooter -d $SDRROOT/dev/nodes/DevMgr_localhost-loca
ldomain/DeviceManager.dcd.xml
]]></script></div>
      </li>
      <li 
  class="enumerate" id="x13-296008x4">On the Eventviewer terminal, the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> and <a 
href="mainli2.html#glo:device">Device</a> registration are shown:
      <div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
eventviewer REDHAWK_DEV ODM_Channel
Receiving events. Press 'enter' key to exit
{'sourceId': 'DCE:83f3c741-19bf-4794-877f-0322cd62290a',
'sourceName': 'DevMgr_localhost-localdomain', 'sourceIOR
': <ossie.cf.CF._objref_DeviceManager instance at 0x2516
0e0>, 'sourceCategory': DEVICE_MANAGER, 'producerId': 'D
CE:516aa867-e262-4c70-8355-db415f4b0fc6'}
{'sourceId': 'DCE:f5781785-9dd7-4873-8f30-99d7e2ca1a8f',
'sourceName': 'GPP_localhost_localdomain', 'sourceIOR':
<ossie.cf.CF._objref_AggregateExecutableDevice instance
at 0x2d46638>, 'sourceCategory': DEVICE, 'producerId': '
DCE:516aa867-e262-4c70-8355-db415f4b0fc6'}
]]></script></div>
                                                                                         
                                                                                         
      </li>
      <li 
  class="enumerate" id="x13-296010x5">Shutdown the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> (Ctrl+C on the <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> terminal)
      </li>
      <li 
  class="enumerate" id="x13-296012x6">On the Eventviewer terminal, the <a 
href="mainli2.html#glo:device">Device</a> and <a 
href="mainli2.html#glo:devicemanager">Device Manager</a> unregistration is displayed:
      <div class="minipage"><script type="syntaxhighlighter" class="brush: bash"><![CDATA[
eventviewer REDHAWK_DEV ODM_Channel
Receiving events. Press 'enter' key to exit
{'sourceId': 'DCE:83f3c741-19bf-4794-877f-0322cd62290a',
'sourceName': 'DevMgr_localhost-localdomain', 'sourceIOR
': <ossie.cf.CF._objref_DeviceManager instance at 0x2516
0e0>, 'sourceCategory': DEVICE_MANAGER, 'producerId': 'D
CE:516aa867-e262-4c70-8355-db415f4b0fc6'}
{'sourceId': 'DCE:f5781785-9dd7-4873-8f30-99d7e2ca1a8f',
'sourceName': 'GPP_localhost_localdomain', 'sourceIOR':
<ossie.cf.CF._objref_AggregateExecutableDevice instance
at 0x2d46638>, 'sourceCategory': DEVICE, 'producerId': '
DCE:516aa867-e262-4c70-8355-db415f4b0fc6'}
{'sourceId': 'DCE:f5781785-9dd7-4873-8f30-99d7e2ca1a8f',
'sourceName': 'GPP_localhost_localdomain', 'sourceCatego
ry': DEVICE, 'producerId': 'DCE:516aa867-e262-4c70-8355-
db415f4b0fc6'}
{'sourceId': 'DCE:83f3c741-19bf-4794-877f-0322cd62290a',
'sourceName': 'DevMgr_localhost-localdomain', 'sourceCat
egory': DEVICE_MANAGER, 'producerId': 'DCE:516aa867-e262
-4c70-8355-db415f4b0fc6'}
]]></script></div>
      </li></ol>
<!--l. 351--><p class="noindent" >
<h4 class="subsectionHead"><span class="titlemark">11.9.5   </span> <a 
 id="x13-29700011.9.5"></a>Writing Your Own Event Consumer</h4>
<!--l. 353--><p class="noindent" >In <a 
href="mainap9.html#corba">CORBA</a>&#8217;s Event <a 
href="mainap9.html#api">API</a>, <a 
href="mainli2.html#glo:message">Messages</a> are passed as an <span 
class="ectt-1200">CORBA::Any </span>type, so when the Event is
consumed from an <a 
href="mainli2.html#glo:eventchannel">Event Channel</a>, it arrives as a <span 
class="ectt-1200">CORBA::Any </span>type. The <a 
href="mainli2.html#glo:application">Application</a> <span 
class="ectt-1200">eventviewer</span>
contains an example of how to create an Event consumer.
<!--l. 356--><p class="noindent" >The consumer object is an object that implements the <span 
class="ectt-1200">PushConsumer </span>interface.
                                                                                         
                                                                                         
<!--l. 358--><p class="noindent" >In Python, the definition of such a class is: <div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
class Consumer_i(CosEventComm__POA.PushConsumer):
  def __init__(self):
    pass

  def push(self, data):
    event = any.from_any(data)
    print event

  def disconnect_push_consumer (self):
    pass
]]></script></div>
<!--l. 372--><p class="noindent" >In the above example, the call to <span 
class="ectt-1200">any.from_any </span>converts from a <span 
class="ectt-1200">CORBA::Any </span>type to a Python
dictionary.
<!--l. 374--><p class="noindent" >An object of the class <span 
class="ectt-1200">Consumer </span>needs to be instantiated and given to the <a 
href="mainli2.html#glo:domainmanager">Domain Manager</a>. In
Python, the easiest way to access a running <a 
href="mainli2.html#glo:domain">Domain</a> is to use the REDHAWK runtime package (a
thorough description of the REDHAWK runtime package is available in <a 
href="mainch12.html#x14-29900012">Chapter 12</a>); in the case of
a <a 
href="mainli2.html#glo:domain">Domain</a> called <span 
class="ectt-1200">REDHAWK_DEV</span>, the process needed to associate this consumer with the <a 
href="mainli2.html#glo:eventchannel">Event Channel</a>
is: <div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
from ossie.utils import redhawk

_consumer = Consumer_i()
channel_name = 'ODM_Channel'
registration_id = 'some random string'
dom = redhawk.attach('REDHAWK_DEV')
dom.registerWithEventChannel(_consumer._this(), registration_id,
channel_name)
]]></script></div>
<!--l. 389--><p class="noindent" >In the example shown above, the consumer is attached to the <span 
class="ectt-1200">ODM_Channel </span>on the <a 
href="mainli2.html#glo:domain">Domain</a>
<span 
class="ectt-1200">REDHAWK_DEV</span>. The registration <a 
href="mainap9.html#id"><span 
class="ectt-1200">ID</span></a> is some string that can be used to uniquely identify this
registration.
<!--l. 391--><p class="noindent" >Using this <a 
href="mainap9.html#id"><span 
class="ectt-1200">ID</span></a>, to unregister the code the following method is invoked:
<div class="minipage"><script type="syntaxhighlighter" class="brush: python"><![CDATA[
dom.unregisterFromEventChannel(registration_id, channel_name)
]]></script></div>
                                                                                         
                                                                                         
<h3 class="sectionHead"><span class="titlemark">11.10   </span> <a 
 id="x13-29800011.10"></a>The Event Channel Manager</h3>
<!--l. 3--><p class="noindent" >The <a 
href="mainli2.html#glo:eventchannelmanager">Event Channel Manager</a> provides a single point for creation and inspection of <a 
href="mainli2.html#glo:eventchannel">Event Channels</a>
on the <a 
href="mainli2.html#glo:domain">Domain</a>. It also provides an interface for users to register publishers or subscribers to any of
the available <a 
href="mainli2.html#glo:eventchannel">Event Channels</a>.
                                                                                         
                                                                                         
<!--l. 1--><div class="crosslinks"><p class="noindent">[<a 
href="mainch12.html" >next</a>] [<a 
href="mainch10.html" >prev</a>] [<a 
href="mainch10.html#tailmainch10.html" >prev-tail</a>] [<a 
href="mainch11.html" >front</a>] [<a 
href="main.html#mainch11.html" >up</a>] </p></div>
<!--l. 1--><p class="noindent" ><a 
 id="tailmainch11.html"></a>  
 
<div class=license>  
<hr> 
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a><br /><span xmlns:dct="http:// purl.org/dc/terms/" property="dct:title">REDHAWK Documentation</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>. 
 
</div></section></div> 
</body></html> 
